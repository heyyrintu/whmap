<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lifelong Online — Warehouse Relocation Intelligence</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #F7F5F2;
  --surface: #FDFCFB;
  --card: #FFFFFF;
  --border: rgba(45, 35, 25, 0.08);
  --border-h: rgba(45, 35, 25, 0.16);
  --shadow-xs: 0 1px 3px rgba(45, 35, 25, 0.04);
  --shadow-sm: 0 2px 8px rgba(45, 35, 25, 0.05), 0 1px 2px rgba(45, 35, 25, 0.03);
  --shadow: 0 4px 16px rgba(45, 35, 25, 0.07), 0 1px 4px rgba(45, 35, 25, 0.03);
  --shadow-lg: 0 8px 32px rgba(45, 35, 25, 0.10), 0 2px 8px rgba(45, 35, 25, 0.04);
  --shadow-xl: 0 16px 48px rgba(45, 35, 25, 0.12), 0 4px 12px rgba(45, 35, 25, 0.05);
  --t1: #1A1612;
  --t2: #4A4139;
  --t3: #8C8177;
  --t4: #B8AFA6;
  --grn: #16A169;
  --grn-bg: #ECFDF5;
  --grn-bdr: #86EFAC;
  --grn-t: #065F46;
  --red: #DE1C1C;
  --red-bg: #FEF2F2;
  --red-bdr: #FECACA;
  --red-t: #991B1B;
  --amb: #FEA418;
  --amb-bg: #FFFBEB;
  --amb-bdr: #FDE68A;
  --blue: #2563EB;
  --blue-bg: #EFF6FF;
  --brand: #DE1C1C;
  --brand-lt: #FEF2F2;
  --brand2: #FEA418;
  --accent: #C2785C;
  --accent-bg: #FDF4F0;
  --radius: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
}
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--t1);
  overflow: hidden;
  height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ── LOADER ── */
#loader {
  position: fixed; inset: 0; z-index: 9999;
  background: var(--bg);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  transition: opacity .6s ease, visibility .6s ease;
}
#loader.out { opacity: 0; visibility: hidden; pointer-events: none; }
.ld-w { width: 48px; height: 48px; position: relative; }
.ld-r {
  position: absolute; inset: 0; border-radius: 50%;
  border: 2px solid transparent;
}
.ld-r:nth-child(1) { border-top-color: var(--accent); animation: sp .9s linear infinite; }
.ld-r:nth-child(2) { inset: 8px; border-right-color: var(--t4); animation: sp 1.4s linear infinite reverse; }
.ld-r:nth-child(3) { inset: 16px; border-bottom-color: var(--grn); animation: sp 1.8s linear infinite; }
@keyframes sp { to { transform: rotate(360deg); } }
.ld-t {
  margin-top: 24px; font-family: 'DM Mono', monospace;
  font-size: 10px; letter-spacing: 3px; text-transform: uppercase;
  color: var(--t4); font-weight: 500;
}
.ld-b { width: 120px; height: 2px; background: var(--border); margin-top: 16px; border-radius: 2px; overflow: hidden; }
.ld-f { height: 100%; width: 0; background: var(--accent); border-radius: 2px; animation: lf 1.6s cubic-bezier(.4,0,.2,1) forwards; }
@keyframes lf { to { width: 100%; } }

/* ── HEADER ── */
#hdr {
  position: fixed; top: 0; left: 0; right: 0; z-index: 200;
  height: 64px; display: flex; align-items: center; justify-content: space-between;
  padding: 0 24px;
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid var(--border);
}
.brand { display: flex; align-items: center; gap: 14px; }
.brand-ico {
  width: 36px; height: 36px; border-radius: 10px;
  background: linear-gradient(135deg, var(--accent) 0%, #A8604A 100%);
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: 11px; color: #fff; letter-spacing: -.3px;
  font-family: 'Sora', sans-serif;
  box-shadow: 0 2px 8px rgba(194,120,92,.3);
  flex-shrink: 0;
}
.brand h1 {
  font-family: 'Sora', sans-serif;
  font-size: 15px; font-weight: 700; color: var(--t1); letter-spacing: -.3px;
}
.brand p {
  font-size: 10px; color: var(--t3); letter-spacing: .5px;
  font-weight: 500; margin-top: 1px;
}
.kpis { display: flex; gap: 8px; }
.kpi {
  padding: 8px 16px; border-radius: var(--radius); min-width: 130px;
  background: var(--card); border: 1px solid var(--border);
  position: relative; overflow: hidden; transition: all .25s ease;
}
.kpi:hover { border-color: var(--border-h); box-shadow: var(--shadow-sm); transform: translateY(-1px); }
.kpi::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; }
.kpi.g::before { background: var(--grn); }
.kpi.r::before { background: var(--red); }
.kpi.a::before { background: var(--amb); }
.kpi.b::before { background: var(--blue); }
.kpi-l { font-size: 9px; letter-spacing: .8px; text-transform: uppercase; color: var(--t4); font-weight: 600; }
.kpi-v {
  font-size: 20px; font-weight: 700; font-family: 'DM Mono', monospace;
  margin-top: 2px; letter-spacing: -1px;
}
.kpi-v.g { color: var(--grn); }
.kpi-v.r { color: var(--red); }
.kpi-v.a { color: var(--amb); }
.kpi-v.b { color: var(--blue); }
.kpi-s { font-size: 9px; color: var(--t4); margin-top: 1px; font-weight: 500; }

/* ── LAYOUT ── */
#app { height: calc(100vh - 64px); margin-top: 64px; display: flex; position: relative; }

/* ── MAP ── */
#map-wrap {
  position: absolute; top: 0; left: 360px; right: 0; bottom: 0;
  z-index: 6; display: block;
}
#map { width: 100%; height: 100%; }
.leaflet-popup-content-wrapper {
  background: var(--card) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-lg) !important;
  color: var(--t1) !important;
  box-shadow: var(--shadow-xl) !important;
  font-family: 'DM Sans', sans-serif !important;
}
.leaflet-popup-tip { background: var(--card) !important; }
.leaflet-popup-close-button { color: var(--t3) !important; font-size: 18px !important; top: 10px !important; right: 10px !important; }

/* WH markers */
.wh-mk { position: relative; width: 28px; height: 28px; }
.wh-core {
  width: 28px; height: 28px; border-radius: 50%;
  border: 3px solid #fff; position: absolute; z-index: 3;
  box-shadow: 0 2px 12px rgba(0,0,0,0.15);
}
.wh-r1 {
  position: absolute; top: -8px; left: -8px; width: 44px; height: 44px;
  border-radius: 50%; border: 1.5px solid; opacity: .25;
  animation: ro 2.8s ease-out infinite;
}
.wh-r2 {
  position: absolute; top: -18px; left: -18px; width: 64px; height: 64px;
  border-radius: 50%; border: 1px solid; opacity: .1;
  animation: ro 2.8s ease-out .8s infinite;
}
@keyframes ro { 0% { transform: scale(.75); opacity: .35; } 100% { transform: scale(1.3); opacity: 0; } }
.wh-lb {
  position: absolute; white-space: nowrap; font-size: 8px; font-weight: 700;
  letter-spacing: 1px; text-transform: uppercase; padding: 3px 8px;
  border-radius: 6px; top: -22px; left: 50%; transform: translateX(-50%);
  z-index: 4; box-shadow: var(--shadow-xs); font-family: 'DM Mono', monospace;
}
.wh-n .wh-core { background: var(--grn); }
.wh-n .wh-r1, .wh-n .wh-r2 { border-color: var(--grn); }
.wh-n .wh-lb { background: var(--grn-bg); color: var(--grn-t); border: 1px solid var(--grn-bdr); }
.wh-x .wh-core { background: var(--red); }
.wh-x .wh-r1, .wh-x .wh-r2 { border-color: var(--red); }
.wh-x .wh-lb { background: var(--red-bg); color: var(--red-t); border: 1px solid var(--red-bdr); }

/* ── SIDEBAR ── */
#side {
  width: 360px; background: var(--card);
  border-right: 1px solid var(--border);
  display: flex; flex-direction: column; overflow: hidden;
  z-index: 20; flex-shrink: 0;
}
.side-hdr {
  padding: 20px 20px 16px;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}
.side-hdr h2 {
  font-family: 'Sora', sans-serif;
  font-size: 13px; font-weight: 700; color: var(--t1); letter-spacing: -.2px;
}
.side-hdr p { font-size: 11px; color: var(--t3); margin-top: 3px; font-weight: 500; }
.sec { padding: 14px 20px; border-bottom: 1px solid var(--border); }
.sec-t {
  font-family: 'DM Mono', monospace;
  font-size: 9px; letter-spacing: 2px; text-transform: uppercase;
  color: var(--t4); font-weight: 500; margin-bottom: 10px;
}
.chips { display: flex; gap: 6px; flex-wrap: wrap; }
.ch {
  padding: 6px 14px; border-radius: 20px; font-size: 11.5px; font-weight: 600;
  cursor: pointer; border: 1px solid var(--border); background: var(--surface);
  color: var(--t2); transition: all .2s ease; user-select: none;
}
.ch:hover { border-color: var(--border-h); background: var(--card); box-shadow: var(--shadow-xs); }
.ch.c-all { background: var(--t1); border-color: var(--t1); color: #fff; }
.ch.c-g { background: var(--grn-bg); border-color: var(--grn-bdr); color: var(--grn-t); }
.ch.c-r { background: var(--red-bg); border-color: var(--red-bdr); color: var(--red-t); }
.modes { display: flex; gap: 6px; margin-top: 10px; }
.md {
  flex: 1; padding: 8px 0; border-radius: 20px; text-align: center;
  font-size: 10px; font-weight: 600; letter-spacing: .5px; text-transform: uppercase;
  cursor: pointer; border: 1px solid var(--border); color: var(--t3);
  transition: all .2s ease; background: var(--surface);
  font-family: 'DM Mono', monospace;
}
.md:hover { color: var(--t2); border-color: var(--border-h); }
.md.on { border-color: var(--accent); color: var(--accent); background: var(--accent-bg); }
.srch { position: relative; }
.s-in {
  width: 100%; padding: 10px 14px 10px 38px; border-radius: 20px;
  border: 1px solid var(--border); background: var(--surface);
  color: var(--t1); font-size: 13px; font-family: 'DM Sans', sans-serif;
  outline: none; transition: all .25s ease;
}
.s-in:focus {
  border-color: var(--accent); background: var(--card);
  box-shadow: 0 0 0 3px rgba(194,120,92,.1);
}
.s-in::placeholder { color: var(--t4); }
.s-ico {
  position: absolute; left: 13px; top: 50%; transform: translateY(-50%);
  font-size: 14px; color: var(--t4);
}
.list-hdr {
  padding: 6px 12px 6px 20px; font-family: 'DM Mono', monospace;
  font-size: 9px; color: var(--t4); font-weight: 500; letter-spacing: 1px;
  text-transform: uppercase; border-bottom: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: center;
  background: var(--surface);
}
.sort-opts { display: flex; gap: 3px; }
.so {
  padding: 3px 8px; border-radius: 10px; font-size: 8.5px; font-weight: 600;
  cursor: pointer; border: 1px solid transparent; color: var(--t4);
  font-family: 'DM Mono', monospace; letter-spacing: .5px; text-transform: uppercase;
  transition: all .2s ease; background: transparent; white-space: nowrap;
}
.so:hover { color: var(--t2); border-color: var(--border); background: var(--card); }
.so.active { background: var(--t1); color: #fff; border-color: var(--t1); }
#cards { flex: 1; overflow-y: auto; padding: 8px 12px; background: var(--bg); }
#cards::-webkit-scrollbar { width: 4px; }
#cards::-webkit-scrollbar-track { background: transparent; }
#cards::-webkit-scrollbar-thumb { background: var(--t4); border-radius: 4px; }
.cd {
  padding: 12px 14px; border-radius: var(--radius); margin-bottom: 4px;
  cursor: pointer; border: 1px solid var(--border);
  background: var(--card); position: relative; overflow: hidden;
  transition: all .2s ease;
}
.cd::before {
  content: ''; position: absolute; left: 0; top: 0; bottom: 0;
  width: 3px; border-radius: var(--radius) 0 0 var(--radius);
}
.cd.g::before { background: var(--grn); }
.cd.r::before { background: var(--red); }
.cd:hover {
  transform: translateX(3px);
  box-shadow: var(--shadow);
  border-color: var(--border-h);
}
.cd-c { font-size: 13px; font-weight: 700; color: var(--t1); }
.cd-s { font-size: 10.5px; color: var(--t3); font-weight: 500; margin-top: 2px; }
.cd-r { display: flex; gap: 6px; align-items: center; margin-top: 8px; }
.cd-t {
  font-size: 10px; font-weight: 600; padding: 3px 8px; border-radius: 6px;
  font-family: 'DM Mono', monospace;
}
.cd-t.gt { background: var(--grn-bg); color: var(--grn); }
.cd-t.rt { background: var(--red-bg); color: var(--red); }
.cd-sv {
  margin-left: auto; font-size: 11px; font-weight: 700;
  font-family: 'DM Mono', monospace;
}
.cd-sv.pos { color: var(--grn); }
.cd-sv.neg { color: var(--red); }
.cd-meta { display: flex; gap: 6px; align-items: center; margin-top: 6px; flex-wrap: wrap; }
.cd-cbm {
  font-size: 10px; font-weight: 700; padding: 2px 7px; border-radius: 5px;
  background: #FFF8EB; color: #D97706; border: 1px solid #FDE68A;
  font-family: 'DM Mono', monospace;
}
.cd-grps {
  font-size: 10px; font-weight: 500; color: var(--t3);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  max-width: 160px;
}

/* ── ANALYTICS PANEL ── */
#ana {
  display: none;
  position: fixed; bottom: 0; left: 360px; right: 0; z-index: 50;
  background: var(--card);
  border-top: 1px solid var(--border);
  box-shadow: 0 -4px 24px rgba(45,35,25,.06);
  padding: 0;
  transform: translateY(100%);
  transition: transform .4s cubic-bezier(.4,0,.2,1);
}
#ana.open { display: flex; transform: translateY(0); }
.ana-toggle {
  position: fixed; bottom: 16px; right: 16px; z-index: 55;
  padding: 10px 18px; border-radius: 20px;
  background: var(--card); border: 1px solid var(--border);
  color: var(--t2); font-family: 'DM Mono', monospace;
  font-size: 10px; font-weight: 500; letter-spacing: 1px;
  text-transform: uppercase; cursor: pointer;
  box-shadow: var(--shadow);
  transition: all .25s ease;
  display: flex; align-items: center; gap: 8px;
}
.ana-toggle:hover { box-shadow: var(--shadow-lg); border-color: var(--border-h); }
.ana-toggle.active { background: var(--t1); color: #fff; border-color: var(--t1); }
.ana-s {
  flex: 1; padding: 16px 20px;
  border-right: 1px solid var(--border);
  display: flex; flex-direction: column; justify-content: center;
}
.ana-s:last-child { border-right: none; }
.ana-l {
  font-family: 'DM Mono', monospace;
  font-size: 9px; letter-spacing: 2px; text-transform: uppercase;
  color: var(--t4); font-weight: 500; margin-bottom: 10px;
}
.donut-w { display: flex; align-items: center; gap: 16px; }
.donut { position: relative; width: 72px; height: 72px; }
.donut canvas { width: 72px; height: 72px; }
.donut-c {
  position: absolute; inset: 0; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
}
.donut-c .pct {
  font-size: 18px; font-weight: 800; font-family: 'DM Mono', monospace;
  color: var(--grn);
}
.donut-c .lbl {
  font-size: 7px; color: var(--t4); font-weight: 600;
  text-transform: uppercase; letter-spacing: 1px;
}
.donut-info { font-size: 12px; line-height: 2; font-weight: 500; color: var(--t2); }
.donut-info span { font-weight: 700; font-family: 'DM Mono', monospace; }
.ts { display: flex; flex-direction: column; gap: 6px; }
.ts-r { display: flex; align-items: center; gap: 8px; font-size: 11.5px; }
.ts-n {
  width: 85px; font-weight: 600; white-space: nowrap;
  overflow: hidden; text-overflow: ellipsis; color: var(--t2);
}
.ts-bg { flex: 1; height: 4px; background: var(--bg); border-radius: 3px; overflow: hidden; }
.ts-fl { height: 100%; border-radius: 3px; transition: width 1s ease; }
.ts-v {
  width: 55px; text-align: right; font-family: 'DM Mono', monospace;
  font-weight: 600; font-size: 10.5px;
}
.dist-bars { display: flex; gap: 4px; align-items: flex-end; height: 60px; }
.d-bar {
  flex: 1; border-radius: 3px 3px 0 0; min-width: 10px;
  transition: height .8s cubic-bezier(.4,0,.2,1);
  position: relative; cursor: default;
}
.d-bar:hover { filter: brightness(.92); }
.d-bar::after {
  content: attr(data-n); position: absolute; top: -16px; left: 50%;
  transform: translateX(-50%); font-size: 9px; color: var(--t3);
  font-family: 'DM Mono', monospace; font-weight: 500;
  opacity: 0; transition: opacity .15s;
}
.d-bar:hover::after { opacity: 1; }
.d-labels { display: flex; gap: 4px; margin-top: 4px; }
.d-labels span {
  flex: 1; text-align: center; font-size: 7px; color: var(--t4);
  font-family: 'DM Mono', monospace;
}

/* ── VIEW RADIO TOGGLE ── */
.view-toggle { display: flex; border-radius: 20px; overflow: hidden; border: 1px solid var(--border); background: var(--surface); }
.view-toggle input[type=radio] { display: none; }
.view-toggle label {
  flex: 1; padding: 7px 0; text-align: center; cursor: pointer;
  font-size: 10.5px; font-weight: 600; color: var(--t3);
  transition: all .2s ease; user-select: none;
  font-family: 'DM Mono', monospace; letter-spacing: .5px;
}
.view-toggle input[type=radio]:checked + label {
  background: var(--t1); color: #fff;
}

/* ── MOBILE SIDEBAR TOGGLE ── */
.menu-toggle {
  display: none;
  position: fixed; top: 72px; left: 8px; z-index: 55;
  width: 40px; height: 40px; border-radius: 50%;
  background: var(--card); border: 1px solid var(--border);
  box-shadow: var(--shadow); cursor: pointer;
  align-items: center; justify-content: center;
  color: var(--t2); font-size: 18px;
  transition: all .25s ease;
}
.menu-toggle:hover { box-shadow: var(--shadow-lg); }
.menu-toggle.active { background: var(--t1); color: #fff; border-color: var(--t1); }

/* ── MOBILE OVERLAY ── */
.sidebar-overlay {
  display: none; position: fixed; inset: 0; z-index: 15;
  background: rgba(26, 22, 18, 0.3);
  backdrop-filter: blur(4px);
  opacity: 0; transition: opacity .3s ease;
}
.sidebar-overlay.show { opacity: 1; }

/* ── RESPONSIVE ── */
@media (max-width: 1200px) {
  .kpis { display: none; }
}

@media (max-width: 900px) {
  #hdr { height: 56px; padding: 0 16px; }
  .brand h1 { font-size: 13px; }
  .brand p { font-size: 9px; }
  .brand-ico { width: 32px; height: 32px; font-size: 10px; }

  #app { margin-top: 56px; height: calc(100vh - 56px); }

  .menu-toggle { display: flex; top: 64px; }

  #side {
    position: fixed; top: 56px; left: 0; bottom: 0;
    width: 320px; z-index: 25;
    transform: translateX(-100%);
    transition: transform .35s cubic-bezier(.4,0,.2,1);
    box-shadow: none;
  }
  #side.open {
    transform: translateX(0);
    box-shadow: 4px 0 24px rgba(45,35,25,.1);
  }

  #map-wrap { left: 0; }

  #ana { left: 0; flex-wrap: wrap; max-height: 50vh; overflow-y: auto; }
  #ana .ana-s { flex: 1 1 50%; min-width: 160px; padding: 12px 14px; }

  .ana-toggle { bottom: 12px; right: 12px; padding: 8px 14px; font-size: 9px; }
}

@media (max-width: 600px) {
  #hdr { height: 52px; padding: 0 12px; gap: 8px; }
  .brand { gap: 10px; }
  .brand h1 { font-size: 12px; }
  .brand p { display: none; }
  .brand-ico { width: 30px; height: 30px; font-size: 9px; border-radius: 8px; }

  #app { margin-top: 52px; height: calc(100vh - 52px); }
  .menu-toggle { top: 58px; left: 6px; width: 36px; height: 36px; font-size: 16px; }

  #side { width: 85vw; max-width: 320px; top: 52px; }
  .side-hdr { padding: 16px 16px 12px; }
  .sec { padding: 12px 16px; }
  .list-hdr { padding: 8px 16px; }
  #cards { padding: 6px 8px; }
  .cd { padding: 10px 12px; }

  #ana { left: 0; }
  #ana .ana-s { flex: 1 1 100%; min-width: auto; }
  .ana-toggle { bottom: 10px; right: 10px; padding: 8px 12px; }
}

/* ── ANIMATIONS ── */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.fade-up { animation: fadeInUp .5s ease both; }
.fade-in { animation: fadeIn .4s ease both; }

/* Leaflet overrides for clean look */
.leaflet-control-zoom {
  border: 1px solid var(--border) !important;
  border-radius: var(--radius) !important;
  box-shadow: var(--shadow-sm) !important;
  overflow: hidden;
}
.leaflet-control-zoom a {
  background: var(--card) !important;
  color: var(--t2) !important;
  border-bottom: 1px solid var(--border) !important;
  width: 34px !important; height: 34px !important; line-height: 34px !important;
  font-size: 16px !important;
}
.leaflet-control-zoom a:hover { background: var(--surface) !important; }
.leaflet-control-zoom a:last-child { border-bottom: none !important; }
</style>
</head>
<body>

<div id="loader">
  <div class="ld-w"><div class="ld-r"></div><div class="ld-r"></div><div class="ld-r"></div></div>
  <div class="ld-t">Preparing Map</div>
  <div class="ld-b"><div class="ld-f"></div></div>
</div>

<header id="hdr">
  <div class="brand">
    <div class="brand-ico">LO</div>
    <div>
      <h1>Haryana — Warehouse Relocation</h1>
      <p>Lifelong Online &middot; Haryana State Network</p>
    </div>
  </div>
  <div class="kpis">
    <div class="kpi g"><div class="kpi-l">New WH Closer</div><div class="kpi-v g" id="k1">0</div><div class="kpi-s">17% of Haryana</div></div>
    <div class="kpi r"><div class="kpi-l">Current Closer</div><div class="kpi-v r" id="k2">0</div><div class="kpi-s">83% of Haryana</div></div>
    <div class="kpi a"><div class="kpi-l">KM Saved</div><div class="kpi-v a">319</div><div class="kpi-s">positive savings</div></div>
    <div class="kpi b"><div class="kpi-l">Destinations</div><div class="kpi-v b">30</div><div class="kpi-s">Haryana only</div></div>
  </div>
</header>

<div id="app">
  <div class="sidebar-overlay" id="sideOverlay" onclick="closeSidebar()"></div>
  <button class="menu-toggle" id="menuBtn" onclick="toggleSidebar()" aria-label="Toggle sidebar">&#9776;</button>

  <aside id="side">
    <div class="side-hdr">
      <h2>Haryana Network</h2>
      <p>30 delivery locations across Haryana</p>
    </div>
    <div class="sec">
      <div class="sec-t">View</div>
      <div class="view-toggle">
        <input type="radio" name="view" id="vHR" checked onchange="setView('haryana')">
        <label for="vHR">&#9679; Haryana</label>
        <input type="radio" name="view" id="vALL" onchange="setView('all')">
        <label for="vALL">&#9711; All India</label>
      </div>
    </div>
    <div class="sec">
      <div class="sec-t">Filter</div>
      <div class="chips">
        <span class="ch c-all" data-f="all" onclick="setF('all')">All &middot; 50</span>
        <span class="ch" data-f="new" onclick="setF('new')">&#9679; New WH &middot; 7</span>
        <span class="ch" data-f="current" onclick="setF('current')">&#9679; Current &middot; 43</span>
      </div>
      <div class="modes">
        <div class="md" id="mH" onclick="togH()">&#9673; Heatmap</div>
        <div class="md" id="mA" onclick="togA()">&#10132; Arcs</div>
      </div>
    </div>
    <div class="sec">
      <div class="srch">
        <span class="s-ico">&#128269;</span>
        <input class="s-in" id="sbox" placeholder="Search Haryana city..." oninput="drawMap()"/>
      </div>
    </div>
    <div class="list-hdr">
      <span id="cnt">30 locations</span>
      <div class="sort-opts">
        <button class="so active" data-s="impact"    onclick="setSort('impact')">Impact</button>
        <button class="so"        data-s="low_dist"  onclick="setSort('low_dist')">&#8595; Dist</button>
        <button class="so"        data-s="high_cbm"  onclick="setSort('high_cbm')">&#8593; CBM</button>
      </div>
    </div>
    <div id="cards"></div>
  </aside>

  <div id="map-wrap"><div id="map"></div></div>

  <div id="ana">
    <div class="ana-s" style="flex:1.2">
      <div class="ana-l">Network Split</div>
      <div class="donut-w">
        <div class="donut"><canvas id="dC" width="144" height="144"></canvas>
          <div class="donut-c"><div class="pct" id="dPct">17%</div><div class="lbl">New WH</div></div>
        </div>
        <div class="donut-info">
          <div><span style="color:var(--grn)">&#9679;</span> New WH: <span style="color:var(--grn)">7</span></div>
          <div><span style="color:var(--red)">&#9679;</span> Current: <span style="color:var(--red)">43</span></div>
        </div>
      </div>
    </div>
    <div class="ana-s" style="flex:1.5"><div class="ana-l">Most Benefiting Cities</div><div class="ts" id="topS"></div></div>
    <div class="ana-s" style="flex:1.5"><div class="ana-l">Most Impacted Cities</div><div class="ts" id="losS"></div></div>
    <div class="ana-s" style="flex:1.2"><div class="ana-l">Distance Distribution</div><div class="dist-bars" id="dBars"></div><div class="d-labels" id="dLbls"></div></div>
  </div>
</div>

<button class="ana-toggle" id="anaBtn" onclick="toggleAnalytics()">
  <span>&#9776;</span> Analytics
</button>

<script>
var LOCS=[{"lat":19.3026,"lon":73.0588,"city":"Bhiwandi","state":"Maharashtra","new_km":1248.9,"cur_km":1295.9,"saving_km":47.0,"closer":"new","cbm":13976.6,"groups":["BigBasket","Flipkart","INTERNAL COMPANY","Offline - MT","Offline Sales-B2B","Others","Store3-Zirakpur","Zepto"]},{"lat":28.4646,"lon":77.0299,"city":"Gurugram","state":"Haryana","new_km":36.0,"cur_km":29.7,"saving_km":-6.3,"closer":"current","cbm":82273.92,"groups":["Amazon","Corporate Sales Debtors","Flipkart","Offline - MT","Offline Sales-B2B","Offline \u2013 GT","Others","Sales to Vendor","Store 2-Lucknow","Store4-Ghaziabad","Swiggy","Zepto"]},{"lat":28.6545456,"lon":77.0810555,"city":"West Delhi","state":"Delhi","new_km":71.0,"cur_km":46.7,"saving_km":-24.3,"closer":"current","cbm":24.64,"groups":["Corporate Sales Debtors","Offline Sales-B2B","Offline \u2013 GT"]},{"lat":20.0112,"lon":73.7902,"city":"Nashik","state":"Maharashtra","new_km":1121.2,"cur_km":1171.4,"saving_km":50.2,"closer":"new","cbm":24.18,"groups":["Offline Sales-B2B","Store4-Ghaziabad"]},{"lat":28.4031,"lon":77.3106,"city":"Faridabad","state":"Haryana","new_km":31.8,"cur_km":63.8,"saving_km":32.0,"closer":"new","cbm":287.3,"groups":["Amazon","BlinkIT","Corporate Sales Debtors","Offline - MT","Offline Sales-B2B","Offline \u2013 GT","Zepto"]},{"lat":28.5448946,"lon":77.2723284,"city":"South East Delhi","state":"Delhi","new_km":49.7,"cur_km":62.2,"saving_km":12.5,"closer":"new","cbm":11.39,"groups":["Offline Sales-B2B"]},{"lat":19.055,"lon":72.8692,"city":"Mumbai","state":"Maharashtra","new_km":1289.0,"cur_km":1337.2,"saving_km":48.2,"closer":"new","cbm":2912.12,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B","Offline \u2013 GT","Others","Swiggy"]},{"lat":29.7256,"lon":76.9107,"city":"Karnal","state":"Haryana","new_km":218.0,"cur_km":176.2,"saving_km":-41.8,"closer":"current","cbm":7.92,"groups":["Offline \u2013 GT"]},{"lat":18.5214,"lon":73.8545,"city":"Pune","state":"Maharashtra","new_km":1308.6,"cur_km":1357.8,"saving_km":49.2,"closer":"new","cbm":4762.5,"groups":["BigBasket","BlinkIT","Offline Sales-B2B","Offline \u2013 GT","Store3-Zirakpur","Swiggy","Zepto"]},{"lat":28.775,"lon":77.4587,"city":"Ghaziabad","state":"Uttar Pradesh","new_km":92.3,"cur_km":102.1,"saving_km":9.8,"closer":"new","cbm":270.9,"groups":["INTERNAL COMPANY","Offline Sales-B2B","Offline \u2013 GT","Sales to Vendor","Store 2-Lucknow","Store4-Ghaziabad"]},{"lat":29.3152073,"lon":76.314082,"city":"Jind","state":"Haryana","new_km":177.3,"cur_km":117.8,"saving_km":-59.5,"closer":"current","cbm":7.35,"groups":["Offline Sales-B2B"]},{"lat":29.3913,"lon":76.9772,"city":"Panipat","state":"Haryana","new_km":173.6,"cur_km":131.8,"saving_km":-41.8,"closer":"current","cbm":6.62,"groups":["Offline Sales-B2B"]},{"lat":28.5964461,"lon":76.6505366,"city":"Jhajjar","state":"Haryana","new_km":81.1,"cur_km":26.9,"saving_km":-54.2,"closer":"current","cbm":1613.51,"groups":["Amazon","Others","Swiggy","Zepto"]},{"lat":28.5706,"lon":77.3272,"city":"Noida","state":"Uttar Pradesh","new_km":56.8,"cur_km":68.9,"saving_km":12.1,"closer":"new","cbm":959.0,"groups":["BigBasket","Corporate Sales Debtors","Offline Sales-B2B","Others","Sales to Vendor","Store4-Ghaziabad"]},{"lat":31.2922,"lon":75.5679,"city":"Jalandhar","state":"Punjab","new_km":458.9,"cur_km":417.5,"saving_km":-41.4,"closer":"current","cbm":48.9,"groups":["Offline - MT","Offline \u2013 GT","Sales to Vendor"]},{"lat":21.1498,"lon":79.0821,"city":"Nagpur","state":"Maharashtra","new_km":984.9,"cur_km":1025.2,"saving_km":40.3,"closer":"new","cbm":421.56,"groups":["BlinkIT","Offline Sales-B2B","Offline \u2013 GT","Store4-Ghaziabad"]},{"lat":26.2037,"lon":78.1574,"city":"Gwalior","state":"Madhya Pradesh","new_km":280.0,"cur_km":340.1,"saving_km":60.1,"closer":"new","cbm":43.02,"groups":["Offline \u2013 GT"]},{"lat":27.1753,"lon":78.0098,"city":"Agra","state":"Uttar Pradesh","new_km":161.3,"cur_km":223.1,"saving_km":61.8,"closer":"new","cbm":14.46,"groups":["Offline - MT","Offline Sales-B2B","Store 2-Lucknow"]},{"lat":31.6357,"lon":74.8787,"city":"Amritsar","state":"Punjab","new_km":507.5,"cur_km":471.0,"saving_km":-36.5,"closer":"current","cbm":8.88,"groups":["Offline - MT","Offline Sales-B2B","Store3-Zirakpur","Store4-Ghaziabad"]},{"lat":28.8796553,"lon":78.8095335,"city":"Moradabad","state":"Uttar Pradesh","new_km":241.5,"cur_km":231.9,"saving_km":-9.6,"closer":"current","cbm":0.23,"groups":["Offline Sales-B2B"]},{"lat":19.3654,"lon":73.3685,"city":"Thane","state":"Maharashtra","new_km":1224.9,"cur_km":1273.6,"saving_km":48.7,"closer":"new","cbm":3936.03,"groups":["Amazon","BigBasket","BlinkIT","Offline Sales-B2B","Others","Swiggy","Zepto"]},{"lat":23.0215,"lon":72.58,"city":"Ahmedabad","state":"Gujarat","new_km":888.9,"cur_km":882.1,"saving_km":-6.8,"closer":"current","cbm":4451.27,"groups":["BigBasket","BlinkIT","Offline Sales-B2B","Offline \u2013 GT","Store4-Ghaziabad","Swiggy"]},{"lat":17.6936,"lon":83.2921,"city":"Visakhapatnam","state":"Andhra Pradesh","new_km":1669.4,"cur_km":1725.8,"saving_km":56.4,"closer":"new","cbm":312.12,"groups":["BlinkIT","Swiggy"]},{"lat":15.2197327,"lon":74.1147213,"city":"South Goa","state":"Goa","new_km":1731.7,"cur_km":1774.9,"saving_km":43.2,"closer":"new","cbm":39.47,"groups":["Swiggy"]},{"lat":11.0018,"lon":76.9628,"city":"Coimbatore","state":"Tamil Nadu","new_km":2257.1,"cur_km":2331.8,"saving_km":74.7,"closer":"new","cbm":758.4,"groups":["BlinkIT","Store4-Ghaziabad","Swiggy"]},{"lat":9.9679032,"lon":76.2444378,"city":"Kochi","state":"Kerala","new_km":2392.4,"cur_km":2435.6,"saving_km":43.2,"closer":"new","cbm":157.69,"groups":["Swiggy"]},{"lat":17.5349835,"lon":78.5246387,"city":"Medchal Malkajgiri","state":"Telangana","new_km":1463.6,"cur_km":1520.0,"saving_km":56.4,"closer":"new","cbm":648.99,"groups":["BlinkIT"]},{"lat":26.9155,"lon":75.819,"city":"Jaipur","state":"Rajasthan","new_km":244.9,"cur_km":242.7,"saving_km":-2.2,"closer":"current","cbm":1011.06,"groups":["BlinkIT","Offline Sales-B2B","Zepto"]},{"lat":28.7167,"lon":77.8904,"city":"Hapur","state":"Uttar Pradesh","new_km":139.4,"cur_km":135.9,"saving_km":-3.5,"closer":"current","cbm":1048.86,"groups":["BlinkIT","Offline Sales-B2B"]},{"lat":13.0837,"lon":80.2702,"city":"Chennai","state":"Tamil Nadu","new_km":2071.4,"cur_km":2127.7,"saving_km":56.3,"closer":"new","cbm":2685.68,"groups":["BigBasket","BlinkIT","Offline Sales-B2B","Store 2-Lucknow","Store3-Zirakpur","Swiggy"]},{"lat":12.9916,"lon":77.6033,"city":"Bengaluru","state":"Karnataka","new_km":2006.5,"cur_km":2052.7,"saving_km":46.2,"closer":"new","cbm":8753.17,"groups":["BigBasket","BlinkIT","Flipkart","INTERNAL COMPANY","Offline Sales-B2B","Offline \u2013 GT","Others","Store3-Zirakpur","Store4-Ghaziabad","Swiggy","Zepto"]},{"lat":15.3886307,"lon":73.8893336,"city":"Sancoale","state":"Goa","new_km":1716.9,"cur_km":1760.1,"saving_km":43.2,"closer":"new","cbm":91.49,"groups":["BlinkIT"]},{"lat":28.467225,"lon":76.8253658,"city":"Farrukhnagar","state":"Haryana","new_km":57.1,"cur_km":8.6,"saving_km":-48.5,"closer":"current","cbm":268.62,"groups":["BlinkIT","Flipkart"]},{"lat":28.9954,"lon":77.0234,"city":"Sonipat","state":"Haryana","new_km":132.0,"cur_km":90.6,"saving_km":-41.4,"closer":"current","cbm":1777.44,"groups":["BigBasket","BlinkIT","Corporate Sales Debtors","Flipkart","Offline Sales-B2B","Sales to Vendor"]},{"lat":20.8428827,"lon":75.5261246,"city":"Jalgaon","state":"Maharashtra","new_km":1010.7,"cur_km":1053.9,"saving_km":43.2,"closer":"new","cbm":14.66,"groups":["Offline Sales-B2B","Offline \u2013 GT"]},{"lat":30.9763026,"lon":76.7674001,"city":"Baddi","state":"Himachal Pradesh","new_km":369.8,"cur_km":328.4,"saving_km":-41.4,"closer":"current","cbm":0.0,"groups":["Offline \u2013 GT"]},{"lat":26.7854254,"lon":75.8226628,"city":"Tehsil Sanganer","state":"Rajasthan","new_km":261.8,"cur_km":247.3,"saving_km":-14.5,"closer":"current","cbm":12.32,"groups":["Swiggy"]},{"lat":26.8381,"lon":80.9346,"city":"Lucknow","state":"Uttar Pradesh","new_km":435.0,"cur_km":538.4,"saving_km":103.4,"closer":"new","cbm":5504.9,"groups":["Amazon","BlinkIT","INTERNAL COMPANY","Offline - MT","Offline Sales-B2B","Store 2-Lucknow","Store3-Zirakpur","Store4-Ghaziabad","Swiggy","Zepto"]},{"lat":23.3701,"lon":85.325,"city":"Ranchi","state":"Jharkhand","new_km":1161.9,"cur_km":1218.3,"saving_km":56.4,"closer":"new","cbm":307.38,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B"]},{"lat":28.6139,"lon":77.209,"city":"Delhi","state":"Delhi","new_km":59.3,"cur_km":58.0,"saving_km":-1.3,"closer":"current","cbm":553.5,"groups":["Corporate Sales Debtors","Flipkart","INTERNAL COMPANY","Offline - MT","Offline Sales-B2B","Offline \u2013 GT","Others","Store 2-Lucknow","Store4-Ghaziabad"]},{"lat":28.3241636,"lon":77.0848644,"city":"Sohna","state":"Haryana","new_km":24.4,"cur_km":40.5,"saving_km":16.1,"closer":"new","cbm":0.03,"groups":["Corporate Sales Debtors"]},{"lat":17.3606,"lon":78.4741,"city":"Hyderabad","state":"Telangana","new_km":1481.6,"cur_km":1548.2,"saving_km":66.6,"closer":"new","cbm":5646.58,"groups":["BigBasket","BlinkIT","Offline - MT","Offline Sales-B2B","Store 2-Lucknow","Store3-Zirakpur","Store4-Ghaziabad","Swiggy","Zepto"]},{"lat":30.3255646,"lon":78.0436813,"city":"Dehradun","state":"Uttarakhand","new_km":332.4,"cur_km":291.0,"saving_km":-41.4,"closer":"current","cbm":246.79,"groups":["BlinkIT"]},{"lat":30.909,"lon":75.8516,"city":"Ludhiana","state":"Punjab","new_km":393.9,"cur_km":348.1,"saving_km":-45.8,"closer":"current","cbm":405.36,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B","Offline \u2013 GT","Sales to Vendor"]},{"lat":25.3356491,"lon":83.0076292,"city":"Varanasi","state":"Uttar Pradesh","new_km":755.9,"cur_km":812.2,"saving_km":56.3,"closer":"new","cbm":248.15,"groups":["BlinkIT"]},{"lat":22.7204,"lon":75.8682,"city":"Indore","state":"Madhya Pradesh","new_km":709.0,"cur_km":769.4,"saving_km":60.4,"closer":"new","cbm":153.98,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B","Others"]},{"lat":22.4910179,"lon":88.5974597,"city":"Nalmuri","state":"West Bengal","new_km":1452.1,"cur_km":1508.4,"saving_km":56.3,"closer":"new","cbm":57.99,"groups":["BigBasket"]},{"lat":30.7041,"lon":76.7177,"city":"Mohali","state":"Punjab","new_km":338.9,"cur_km":297.5,"saving_km":-41.4,"closer":"current","cbm":840.84,"groups":["Offline Sales-B2B","Store3-Zirakpur","Swiggy"]},{"lat":24.6954,"lon":80.777,"city":"Satna","state":"Madhya Pradesh","new_km":673.5,"cur_km":717.4,"saving_km":43.9,"closer":"new","cbm":0.12,"groups":["Offline Sales-B2B"]},{"lat":22.2973,"lon":73.1943,"city":"Vadodara","state":"Gujarat","new_km":942.3,"cur_km":930.4,"saving_km":-11.9,"closer":"current","cbm":44.25,"groups":["Offline Sales-B2B","Offline \u2013 GT"]},{"lat":28.3687,"lon":77.597,"city":"Gautam Buddha Nagar","state":"Uttar Pradesh","new_km":84.1,"cur_km":104.2,"saving_km":20.1,"closer":"new","cbm":5.0,"groups":["Offline Sales-B2B"]},{"lat":20.4686,"lon":85.8792,"city":"Cuttack","state":"Odisha","new_km":1600.9,"cur_km":1657.3,"saving_km":56.4,"closer":"new","cbm":14.84,"groups":["Offline Sales-B2B"]},{"lat":13.1394221,"lon":79.9070839,"city":"Tiruvallur","state":"Tamil Nadu","new_km":2079.4,"cur_km":2135.7,"saving_km":56.3,"closer":"new","cbm":113.23,"groups":["Zepto"]},{"lat":22.5736,"lon":88.3251,"city":"Howrah","state":"West Bengal","new_km":1419.1,"cur_km":1476.5,"saving_km":57.4,"closer":"new","cbm":1279.68,"groups":["Flipkart","INTERNAL COMPANY","Offline - MT","Offline Sales-B2B","Swiggy","Zepto"]},{"lat":13.073,"lon":77.7921,"city":"Hoskote","state":"Karnataka","new_km":2043.6,"cur_km":2066.2,"saving_km":22.6,"closer":"new","cbm":451.64,"groups":["Offline - MT","Zepto"]},{"lat":13.2538,"lon":80.0563,"city":"Thiruvallur","state":"Tamil Nadu","new_km":2057.9,"cur_km":2114.3,"saving_km":56.4,"closer":"new","cbm":1226.2,"groups":["Swiggy","Zepto"]},{"lat":17.9375095,"lon":78.211745,"city":"Medak","state":"Telangana","new_km":1430.1,"cur_km":1486.4,"saving_km":56.3,"closer":"new","cbm":78.05,"groups":["Zepto"]},{"lat":13.0222347,"lon":77.5671832,"city":"Karnataka","state":"Karnataka","new_km":2002.7,"cur_km":2045.9,"saving_km":43.2,"closer":"new","cbm":37.98,"groups":["Zepto"]},{"lat":13.1826245,"lon":77.3395681,"city":"Bengaluru Rural","state":"Karnataka","new_km":1971.8,"cur_km":2015.0,"saving_km":43.2,"closer":"new","cbm":534.95,"groups":["INTERNAL COMPANY","Offline - MT","Zepto"]},{"lat":30.4776857,"lon":76.5937658,"city":"Rajpura","state":"Punjab","new_km":308.1,"cur_km":266.6,"saving_km":-41.5,"closer":"current","cbm":186.71,"groups":["BlinkIT"]},{"lat":20.2603,"lon":85.8395,"city":"Bhubaneswar","state":"Odisha","new_km":1623.1,"cur_km":1678.4,"saving_km":55.3,"closer":"new","cbm":217.4,"groups":["BlinkIT","Offline - MT"]},{"lat":22.5726,"lon":88.3639,"city":"Kolkata","state":"West Bengal","new_km":1421.8,"cur_km":1479.7,"saving_km":57.9,"closer":"new","cbm":1069.04,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B","Swiggy"]},{"lat":25.6093,"lon":85.1235,"city":"Patna","state":"Bihar","new_km":948.7,"cur_km":1009.3,"saving_km":60.6,"closer":"new","cbm":501.87,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B","Offline \u2013 GT"]},{"lat":23.2584857,"lon":77.401989,"city":"Bhopal","state":"Madhya Pradesh","new_km":718.0,"cur_km":761.2,"saving_km":43.2,"closer":"new","cbm":189.2,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B","Offline \u2013 GT","Others"]},{"lat":26.1020792,"lon":91.616621,"city":"Azara","state":"Assam","new_km":1718.9,"cur_km":1779.5,"saving_km":60.6,"closer":"new","cbm":65.66,"groups":["BlinkIT"]},{"lat":21.2095,"lon":72.8317,"city":"Surat","state":"Gujarat","new_km":1083.3,"cur_km":1077.8,"saving_km":-5.5,"closer":"current","cbm":276.4,"groups":["BlinkIT","Offline - MT","Offline Sales-B2B","Offline \u2013 GT"]},{"lat":18.4711751,"lon":73.9072249,"city":"Ahmed Nagar","state":"Maharashtra","new_km":1311.5,"cur_km":1354.7,"saving_km":43.2,"closer":"new","cbm":5.11,"groups":["Offline Sales-B2B"]},{"lat":28.6990095,"lon":77.2314634,"city":"Central Delhi","state":"Delhi","new_km":73.1,"cur_km":67.5,"saving_km":-5.6,"closer":"current","cbm":34.93,"groups":["Offline Sales-B2B"]},{"lat":27.414,"lon":76.617,"city":"Alwar","state":"Rajasthan","new_km":133.6,"cur_km":158.5,"saving_km":24.9,"closer":"new","cbm":0.28,"groups":["Offline Sales-B2B","Offline \u2013 GT"]},{"lat":26.4635198,"lon":80.246895,"city":"Uttar Pradesh","state":"Uttar Pradesh","new_km":424.6,"cur_km":481.0,"saving_km":56.4,"closer":"new","cbm":25.6,"groups":["Zepto"]},{"lat":22.7348832,"lon":88.3966854,"city":"Bandipur","state":"West Bengal","new_km":1427.2,"cur_km":1483.5,"saving_km":56.3,"closer":"new","cbm":685.72,"groups":["BlinkIT"]},{"lat":28.7379145,"lon":77.0100626,"city":"North West Delhi","state":"Delhi","new_km":72.2,"cur_km":53.2,"saving_km":-19.0,"closer":"current","cbm":0.28,"groups":["Offline Sales-B2B"]},{"lat":30.6557,"lon":76.8201,"city":"Zirakpur","state":"Punjab","new_km":323.1,"cur_km":287.6,"saving_km":-35.5,"closer":"current","cbm":79.14,"groups":["INTERNAL COMPANY","Offline - MT","Store3-Zirakpur"]},{"lat":29.8258374,"lon":76.4242968,"city":"Hissar","state":"Haryana","new_km":235.2,"cur_km":193.0,"saving_km":-42.2,"closer":"current","cbm":0.23,"groups":["Offline Sales-B2B"]},{"lat":28.6824341,"lon":77.0305741,"city":"Mundka","state":"Delhi","new_km":68.3,"cur_km":46.0,"saving_km":-22.3,"closer":"current","cbm":0.23,"groups":["Offline Sales-B2B"]},{"lat":23.7952809,"lon":86.4309638,"city":"Dhanbad","state":"Jharkhand","new_km":1159.2,"cur_km":1300.8,"saving_km":141.6,"closer":"new","cbm":1.29,"groups":["Corporate Sales Debtors","Offline - MT"]},{"lat":23.7981005,"lon":79.5419356,"city":"Damoh","state":"Madhya Pradesh","new_km":644.3,"cur_km":716.7,"saving_km":72.4,"closer":"new","cbm":5.32,"groups":["Offline \u2013 GT"]},{"lat":30.7334,"lon":76.7797,"city":"Chandigarh","state":"Chandigarh","new_km":333.9,"cur_km":308.8,"saving_km":-25.1,"closer":"current","cbm":22.59,"groups":["Offline Sales-B2B","Store3-Zirakpur"]},{"lat":28.6139,"lon":77.209,"city":"New Delhi","state":"Delhi","new_km":59.3,"cur_km":58.4,"saving_km":-0.9,"closer":"current","cbm":314.1,"groups":["Corporate Sales Debtors","Offline Sales-B2B","Offline \u2013 GT","Store3-Zirakpur","Store4-Ghaziabad"]},{"lat":28.3015,"lon":76.7501,"city":"Pataudi","state":"Haryana","new_km":63.5,"cur_km":19.4,"saving_km":-44.1,"closer":"current","cbm":774.28,"groups":["Flipkart"]},{"lat":23.6991,"lon":85.9911,"city":"Bokaro","state":"Jharkhand","new_km":1151.7,"cur_km":1261.7,"saving_km":110.0,"closer":"new","cbm":12.76,"groups":["Offline - MT","Offline \u2013 GT"]},{"lat":27.9935177,"lon":77.0419634,"city":"Mewat","state":"Haryana","new_km":43.9,"cur_km":69.0,"saving_km":25.1,"closer":"new","cbm":4.27,"groups":["Offline \u2013 GT"]},{"lat":28.521168,"lon":77.2022237,"city":"Saket","state":"Delhi","new_km":54.2,"cur_km":53.6,"saving_km":-0.6,"closer":"current","cbm":0.25,"groups":["Corporate Sales Debtors"]},{"lat":20.0538149,"lon":85.5023308,"city":"Khordha","state":"Odisha","new_km":1559.4,"cur_km":1668.3,"saving_km":108.9,"closer":"new","cbm":10.2,"groups":["Offline Sales-B2B"]},{"lat":12.9292731,"lon":77.5824229,"city":"Jayanagar","state":"Karnataka","new_km":2012.6,"cur_km":2063.2,"saving_km":50.6,"closer":"new","cbm":3.81,"groups":["Offline Sales-B2B"]},{"lat":20.3735482,"lon":72.9084376,"city":"Vapi","state":"Gujarat","new_km":1180.2,"cur_km":1176.4,"saving_km":-3.8,"closer":"current","cbm":2.41,"groups":["Offline \u2013 GT"]},{"lat":30.9078,"lon":77.1024,"city":"Solan","state":"Himachal Pradesh","new_km":390.1,"cur_km":321.6,"saving_km":-68.5,"closer":"current","cbm":30.56,"groups":["Offline Sales-B2B","Offline \u2013 GT"]},{"lat":31.0917102,"lon":76.5289701,"city":"Rupnagar","state":"Punjab","new_km":395.0,"cur_km":352.4,"saving_km":-42.6,"closer":"current","cbm":4.95,"groups":["Offline \u2013 GT"]},{"lat":23.5022201,"lon":74.9551534,"city":"Ratlam","state":"Madhya Pradesh","new_km":659.8,"cur_km":708.2,"saving_km":48.4,"closer":"new","cbm":4.89,"groups":["Offline Sales-B2B"]},{"lat":20.8256232,"lon":78.6131455,"city":"Wardha","state":"Maharashtra","new_km":1075.1,"cur_km":1037.2,"saving_km":-37.9,"closer":"current","cbm":3.91,"groups":["Offline Sales-B2B","Offline \u2013 GT","Store3-Zirakpur"]},{"lat":29.0018557,"lon":77.7679671,"city":"Meerut","state":"Uttar Pradesh","new_km":152.1,"cur_km":141.5,"saving_km":-10.6,"closer":"current","cbm":22.21,"groups":["Offline - MT","Offline Sales-B2B","Sales to Vendor"]},{"lat":15.3572075,"lon":75.1295412,"city":"Hubli Vidyanagar","state":"Karnataka","new_km":1688.7,"cur_km":1750.0,"saving_km":61.3,"closer":"new","cbm":3.22,"groups":["Offline Sales-B2B"]},{"lat":31.6516617,"lon":77.0092542,"city":"Mandi","state":"Himachal Pradesh","new_km":518.7,"cur_km":416.7,"saving_km":-102.0,"closer":"current","cbm":0.23,"groups":["Store3-Zirakpur"]},{"lat":28.2109261,"lon":76.9506404,"city":"Tauru","state":"Haryana","new_km":24.2,"cur_km":37.9,"saving_km":13.7,"closer":"new","cbm":6.91,"groups":["Offline Sales-B2B"]},{"lat":20.6095183,"lon":83.1673029,"city":"Balangir","state":"Odisha","new_km":1313.9,"cur_km":1408.0,"saving_km":94.1,"closer":"new","cbm":1.54,"groups":["Offline Sales-B2B"]},{"lat":21.5006421,"lon":86.919884,"city":"Balasore","state":"Odisha","new_km":1471.6,"cur_km":1662.5,"saving_km":190.9,"closer":"new","cbm":2.33,"groups":["Offline Sales-B2B"]},{"lat":19.6090068,"lon":84.7080633,"city":"Ganjam","state":"Odisha","new_km":1587.4,"cur_km":1648.6,"saving_km":61.2,"closer":"new","cbm":null,"groups":[]},{"lat":21.5570606,"lon":84.1528515,"city":"Sambalpur","state":"Odisha","new_km":1349.1,"cur_km":1385.2,"saving_km":36.1,"closer":"new","cbm":2.35,"groups":["Offline Sales-B2B"]},{"lat":22.9099,"lon":88.0121,"city":"Hooghly","state":"West Bengal","new_km":1380.6,"cur_km":1425.4,"saving_km":44.8,"closer":"new","cbm":72.52,"groups":["Offline - MT","Offline Sales-B2B"]},{"lat":26.1482548,"lon":85.3316097,"city":"Muzaffarpur","state":"Bihar","new_km":947.9,"cur_km":1007.3,"saving_km":59.4,"closer":"new","cbm":10.71,"groups":["Offline - MT","Offline Sales-B2B","Offline \u2013 GT"]},{"lat":28.6371795,"lon":77.1297333,"city":"Mayapuri","state":"Delhi","new_km":62.1,"cur_km":51.4,"saving_km":-10.7,"closer":"current","cbm":1.21,"groups":["Offline \u2013 GT"]},{"lat":19.757249,"lon":73.0931199,"city":"Palghar","state":"Maharashtra","new_km":1232.7,"cur_km":1238.5,"saving_km":5.8,"closer":"new","cbm":7.66,"groups":["Offline \u2013 GT"]},{"lat":23.1701522,"lon":79.9324505,"city":"Jabalpur","state":"Madhya Pradesh","new_km":735.1,"cur_km":815.1,"saving_km":80.0,"closer":"new","cbm":3.48,"groups":["Offline Sales-B2B","Offline \u2013 GT"]},{"lat":19.3025562,"lon":73.0588072,"city":"Bhiwandi, Thane Maharashtra","state":"Maharashtra","new_km":1248.9,"cur_km":1296.8,"saving_km":47.9,"closer":"new","cbm":1.03,"groups":["Offline Sales-B2B"]},{"lat":23.6431837,"lon":80.9419078,"city":"Umaria","state":"Madhya Pradesh","new_km":815.1,"cur_km":828.2,"saving_km":13.1,"closer":"new","cbm":0.02,"groups":["Offline Sales-B2B"]},{"lat":23.5949103,"lon":72.9605997,"city":"Himmatnagar Gujarat","state":"Gujarat","new_km":813.5,"cur_km":793.4,"saving_km":-20.1,"closer":"current","cbm":1.92,"groups":["Offline \u2013 GT"]},{"lat":26.1346459,"lon":87.4654062,"city":"Araria","state":"Bihar","new_km":1186.8,"cur_km":1239.8,"saving_km":53.0,"closer":"new","cbm":3.01,"groups":["Offline \u2013 GT"]},{"lat":26.1806,"lon":91.7539,"city":"Guwahati","state":"Assam","new_km":1725.4,"cur_km":1793.1,"saving_km":67.7,"closer":"new","cbm":26.72,"groups":["Offline - MT","Offline Sales-B2B"]},{"lat":24.7560846,"lon":81.3810574,"city":"Rewa","state":"Madhya Pradesh","new_km":739.2,"cur_km":752.1,"saving_km":12.9,"closer":"new","cbm":3.58,"groups":["Offline \u2013 GT"]},{"lat":17.4337246,"lon":78.5006827,"city":"Secunderabad","state":"Telangana","new_km":1472.7,"cur_km":1541.1,"saving_km":68.4,"closer":"new","cbm":7.9,"groups":["Offline Sales-B2B"]},{"lat":23.4081507,"lon":75.109155,"city":"Bangrod Ratlam","state":"Madhya Pradesh","new_km":648.2,"cur_km":714.8,"saving_km":66.6,"closer":"new","cbm":0.84,"groups":["Offline \u2013 GT"]},{"lat":26.3462741,"lon":81.6252039,"city":"Amethi","state":"Uttar Pradesh","new_km":538.3,"cur_km":654.3,"saving_km":116.0,"closer":"new","cbm":0.08,"groups":["Store4-Ghaziabad"]},{"lat":29.4712681,"lon":75.8545236,"city":"Uklana","state":"Haryana","new_km":233.8,"cur_km":177.9,"saving_km":-55.9,"closer":"current","cbm":1.6,"groups":["Offline Sales-B2B"]},{"lat":20.9854052,"lon":86.5934226,"city":"Bhadrak","state":"Odisha","new_km":1552.0,"cur_km":1677.4,"saving_km":125.4,"closer":"new","cbm":0.01,"groups":["Offline Sales-B2B"]},{"lat":19.2882,"lon":73.0546,"city":"Bhiwandi Thane","state":"Maharashtra","new_km":1250.6,"cur_km":1298.8,"saving_km":48.2,"closer":"new","cbm":50.25,"groups":["Offline Sales-B2B"]},{"lat":30.2093,"lon":76.3397,"city":"Patiala","state":"Punjab","new_km":281.8,"cur_km":239.6,"saving_km":-42.2,"closer":"current","cbm":566.6,"groups":["BlinkIT","Offline Sales-B2B"]},{"lat":13.0222347,"lon":77.5671832,"city":"Bengaluru (Bangalore) Urban","state":"Karnataka","new_km":2002.7,"cur_km":2050.8,"saving_km":48.1,"closer":"new","cbm":4.87,"groups":["Offline Sales-B2B"]},{"lat":22.9163581,"lon":72.5921757,"city":"Aslali (Ahmedabad)","state":"Gujarat","new_km":901.4,"cur_km":893.9,"saving_km":-7.5,"closer":"current","cbm":0.03,"groups":["Offline Sales-B2B"]},{"lat":12.9461555,"lon":77.5503844,"city":"Bengaluru Urban","state":"Karnataka","new_km":2011.9,"cur_km":2060.8,"saving_km":48.9,"closer":"new","cbm":1.57,"groups":["Offline Sales-B2B"]},{"lat":27.9921616,"lon":76.3856561,"city":"Neemrana","state":"Rajasthan","new_km":95.3,"cur_km":80.7,"saving_km":-14.6,"closer":"current","cbm":1.34,"groups":["Offline Sales-B2B"]},{"lat":30.3843674,"lon":76.770421,"city":"Ambala","state":"Haryana","new_km":289.0,"cur_km":264.5,"saving_km":-24.5,"closer":"current","cbm":0.02,"groups":["Offline Sales-B2B"]},{"lat":22.6865592,"lon":88.3053455,"city":"Dankuni Hooghly","state":"West Bengal","new_km":1407.0,"cur_km":1468.3,"saving_km":61.3,"closer":"new","cbm":0.53,"groups":["Offline Sales-B2B"]},{"lat":30.6975401,"lon":76.8551066,"city":"Panchkula","state":"Haryana","new_km":331.3,"cur_km":307.2,"saving_km":-24.1,"closer":"current","cbm":3.91,"groups":["Store3-Zirakpur"]},{"lat":23.0373068,"lon":72.5447481,"city":"Gujarat","state":"Gujarat","new_km":894.2,"cur_km":883.7,"saving_km":-10.5,"closer":"current","cbm":1.99,"groups":["Offline \u2013 GT"]},{"lat":28.6223066,"lon":77.2394313,"city":"Delhi","state":"New Delhi","new_km":59.0,"cur_km":60.2,"saving_km":1.2,"closer":"new","cbm":0.12,"groups":["Offline Sales-B2B"]},{"lat":28.9010899,"lon":76.5801935,"city":"Rohtak","state":"Haryana","new_km":122.9,"cur_km":66.7,"saving_km":-56.2,"closer":"current","cbm":0.42,"groups":["Corporate Sales Debtors","Offline \u2013 GT"]},{"lat":21.2381,"lon":81.6337,"city":"Raipur","state":"Chhattisgarh","new_km":1093.0,"cur_km":1137.9,"saving_km":44.9,"closer":"new","cbm":23.6,"groups":["Offline - MT","Offline Sales-B2B"]},{"lat":26.4609,"lon":80.3218,"city":"Kanpur","state":"Uttar Pradesh","new_km":403.6,"cur_km":508.1,"saving_km":104.5,"closer":"new","cbm":6.0,"groups":["Offline \u2013 GT","Store4-Ghaziabad"]},{"lat":11.4905,"lon":77.3505,"city":"Erode","state":"Tamil Nadu","new_km":2208.7,"cur_km":2298.2,"saving_km":89.5,"closer":"new","cbm":35.12,"groups":["Offline Sales-B2B"]},{"lat":20.4321957,"lon":73.1409893,"city":"Valsad","state":"Gujarat","new_km":1175.0,"cur_km":1158.1,"saving_km":-16.9,"closer":"current","cbm":3.8,"groups":["Offline Sales-B2B","Offline \u2013 GT"]},{"lat":17.424932,"lon":78.5159753,"city":"Seethaphalmandi","state":"Telangana","new_km":1474.7,"cur_km":1542.6,"saving_km":67.9,"closer":"new","cbm":31.64,"groups":["Offline Sales-B2B"]},{"lat":25.4367659,"lon":75.7361471,"city":"Bundi","state":"Rajasthan","new_km":402.7,"cur_km":448.5,"saving_km":45.8,"closer":"new","cbm":0.06,"groups":["Offline Sales-B2B"]},{"lat":22.6674338,"lon":88.3672058,"city":"Ariadaha North 24 Parganas","state":"West Bengal","new_km":1414.3,"cur_km":1475.5,"saving_km":61.2,"closer":"new","cbm":0.06,"groups":["Offline Sales-B2B"]},{"lat":30.8243637,"lon":76.1597076,"city":"Bhagwanpura Ludhiana","state":"Punjab","new_km":371.1,"cur_km":323.6,"saving_km":-47.5,"closer":"current","cbm":0.06,"groups":["Offline Sales-B2B"]},{"lat":13.0222347,"lon":77.5671832,"city":"Bangalore West","state":"Karnataka","new_km":2002.7,"cur_km":2050.8,"saving_km":48.1,"closer":"new","cbm":0.04,"groups":["Offline Sales-B2B"]},{"lat":12.9015806,"lon":77.6328786,"city":"Chennai City South,","state":"Tamil Nadu","new_km":2018.2,"cur_km":2108.6,"saving_km":90.4,"closer":"new","cbm":0.04,"groups":["Offline Sales-B2B"]},{"lat":13.0222347,"lon":77.5671832,"city":"Chennai City North,","state":"Tamil Nadu","new_km":2002.7,"cur_km":2091.9,"saving_km":89.2,"closer":"new","cbm":0.04,"groups":["Offline Sales-B2B"]},{"lat":28.4671,"lon":77.5138,"city":"Greater Noida","state":"Uttar Pradesh","new_km":80.7,"cur_km":88.9,"saving_km":8.2,"closer":"new","cbm":409.89,"groups":["Corporate Sales Debtors","Offline Sales-B2B","Sales to Vendor","Store4-Ghaziabad"]},{"lat":22.5753205,"lon":88.3600377,"city":"Kolkata Central, West Bengal,","state":"West Bengal","new_km":1421.1,"cur_km":1480.8,"saving_km":59.7,"closer":"new","cbm":0.04,"groups":["Offline Sales-B2B"]},{"lat":10.0383947,"lon":76.5074145,"city":"Ernakulam","state":"Kerala","new_km":2395.3,"cur_km":2425.7,"saving_km":30.4,"closer":"new","cbm":null,"groups":[]},{"lat":12.3051828,"lon":76.6553609,"city":"Mysore","state":"Karnataka","new_km":2062.5,"cur_km":2143.8,"saving_km":81.3,"closer":"new","cbm":0.06,"groups":["Offline Sales-B2B"]},{"lat":24.760609,"lon":79.6781776,"city":"Chhatarpur","state":"Madhya Pradesh","new_km":550.9,"cur_km":613.0,"saving_km":62.1,"closer":"new","cbm":3.68,"groups":["Offline \u2013 GT"]},{"lat":27.6624156,"lon":75.0279971,"city":"Sikar","state":"Rajasthan","new_km":276.0,"cur_km":246.4,"saving_km":-29.6,"closer":"current","cbm":0.4,"groups":["Offline Sales-B2B"]},{"lat":19.1462636,"lon":72.9339461,"city":"Bhandup West","state":"Maharashtra","new_km":1274.3,"cur_km":1321.7,"saving_km":47.4,"closer":"new","cbm":0.11,"groups":["Corporate Sales Debtors"]},{"lat":28.5660924,"lon":77.2432851,"city":"Lajpat Nagar","state":"Delhi","new_km":53.9,"cur_km":60.1,"saving_km":6.2,"closer":"new","cbm":0.1,"groups":["Corporate Sales Debtors"]},{"lat":28.6711527,"lon":77.4120356,"city":"Gaziabad","state":"Uttar Pradesh","new_km":78.4,"cur_km":82.6,"saving_km":4.2,"closer":"new","cbm":0.03,"groups":["Corporate Sales Debtors"]},{"lat":15.4989946,"lon":73.8282141,"city":"Goa","state":"Goa","new_km":1702.9,"cur_km":1746.4,"saving_km":43.5,"closer":"new","cbm":0.05,"groups":["Corporate Sales Debtors"]},{"lat":29.2118,"lon":78.9617,"city":"Kashipur","state":"Uttarakhand","new_km":284.0,"cur_km":275.1,"saving_km":-8.9,"closer":"current","cbm":1.54,"groups":["Offline Sales-B2B","Store3-Zirakpur"]},{"lat":21.7080427,"lon":72.9956936,"city":"Bharuch","state":"Gujarat","new_km":1017.6,"cur_km":1009.5,"saving_km":-8.1,"closer":"current","cbm":0.27,"groups":["Offline Sales-B2B"]},{"lat":28.6545409,"lon":77.1513605,"city":"Kirti Nagar","state":"Delhi","new_km":66.2,"cur_km":54.9,"saving_km":-11.3,"closer":"current","cbm":88.67,"groups":["Sales to Vendor"]},{"lat":23.4847,"lon":88.5567,"city":"Nadia","state":"West Bengal","new_km":1407.5,"cur_km":1444.6,"saving_km":37.1,"closer":"new","cbm":341.04,"groups":["Flipkart","Offline Sales-B2B"]},{"lat":23.1885131,"lon":75.7716562,"city":"Ujjain","state":"Madhya Pradesh","new_km":652.8,"cur_km":725.5,"saving_km":72.7,"closer":"new","cbm":1.19,"groups":["Offline \u2013 GT"]},{"lat":15.3918926,"lon":73.8344664,"city":"Chicalim","state":"Goa","new_km":1723.8,"cur_km":1760.1,"saving_km":36.3,"closer":"new","cbm":31.62,"groups":["BlinkIT"]},{"lat":28.6117432,"lon":77.2982794,"city":"East Delhi","state":"Delhi","new_km":61.2,"cur_km":68.5,"saving_km":7.3,"closer":"new","cbm":0.98,"groups":["Offline \u2013 GT"]},{"lat":28.7162092,"lon":77.1170743,"city":"Rohini","state":"Delhi","new_km":78.7,"cur_km":56.8,"saving_km":-21.9,"closer":"current","cbm":0.01,"groups":["Corporate Sales Debtors","Store4-Ghaziabad"]},{"lat":28.6124504,"lon":76.9865067,"city":"Najafgarh","state":"Delhi","new_km":55.5,"cur_km":35.2,"saving_km":-20.3,"closer":"current","cbm":0.01,"groups":["Corporate Sales Debtors"]},{"lat":30.7127455,"lon":76.832944,"city":"Manimajra","state":"Chandigarh","new_km":334.4,"cur_km":306.1,"saving_km":-28.3,"closer":"current","cbm":0.22,"groups":["Store3-Zirakpur"]},{"lat":26.6678,"lon":83.3642,"city":"Gorakhpur","state":"Uttar Pradesh","new_km":705.3,"cur_km":834.0,"saving_km":128.7,"closer":"new","cbm":3.22,"groups":["Offline Sales-B2B","Offline \u2013 GT","Store4-Ghaziabad"]},{"lat":28.5911592,"lon":77.3525353,"city":"Gautam Buddha Nagar Noida","state":"Uttar Pradesh","new_km":59.7,"cur_km":72.3,"saving_km":12.6,"closer":"new","cbm":null,"groups":[]},{"lat":28.6960518,"lon":77.1526404,"city":"Netaji Subhash Place","state":"Delhi","new_km":70.3,"cur_km":58.4,"saving_km":-11.9,"closer":"current","cbm":1.83,"groups":["Offline Sales-B2B"]},{"lat":28.588789,"lon":77.3447127,"city":"Noida Gautam  Buddha Nagar","state":"Uttar Pradesh","new_km":59.2,"cur_km":71.3,"saving_km":12.1,"closer":"new","cbm":2.58,"groups":["Offline Sales-B2B"]},{"lat":29.9123514,"lon":78.0087178,"city":"Haridwar","state":"Uttarakhand","new_km":263.6,"cur_km":242.9,"saving_km":-20.7,"closer":"current","cbm":0.41,"groups":["Offline Sales-B2B"]},{"lat":19.1763408,"lon":72.9889108,"city":"Navi Mumbai  Thane","state":"Maharashtra","new_km":1267.3,"cur_km":1315.6,"saving_km":48.3,"closer":"new","cbm":0.44,"groups":["Offline Sales-B2B"]},{"lat":23.9817237,"lon":85.3713535,"city":"Hazaribagh Jharkhand","state":"Jharkhand","new_km":1073.2,"cur_km":1178.2,"saving_km":105.0,"closer":"new","cbm":3.81,"groups":["Offline \u2013 GT"]},{"lat":28.6336139,"lon":77.2234769,"city":"New Delhi","state":"Uttar Pradesh","new_km":61.3,"cur_km":59.9,"saving_km":-1.4,"closer":"current","cbm":null,"groups":[]},{"lat":19.1763408,"lon":72.9889108,"city":"Navi Mumba","state":"Maharashtra","new_km":1267.3,"cur_km":1315.6,"saving_km":48.3,"closer":"new","cbm":2.06,"groups":["Offline Sales-B2B"]},{"lat":28.205553,"lon":76.793427,"city":"Dharuhera (Hr.) Dharuhera","state":"Haryana","new_km":46.3,"cur_km":32.3,"saving_km":-14.0,"closer":"current","cbm":null,"groups":[]},{"lat":22.5058547,"lon":73.4715851,"city":"Halol","state":"Gujarat","new_km":861.7,"cur_km":887.8,"saving_km":26.1,"closer":"new","cbm":0.11,"groups":["Offline Sales-B2B"]},{"lat":26.08299,"lon":86.0324951,"city":"Darbhanga","state":"Bihar","new_km":1027.2,"cur_km":1085.7,"saving_km":58.5,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":25.0799,"lon":88.1288,"city":"Malda","state":"West Bengal","new_km":1336.8,"cur_km":1319.6,"saving_km":-17.2,"closer":"current","cbm":1.19,"groups":["Offline - MT","Offline Sales-B2B"]},{"lat":22.4207025,"lon":87.3269963,"city":"Midnapore","state":"West Bengal","new_km":1393.0,"cur_km":1392.3,"saving_km":-0.7,"closer":"current","cbm":0.75,"groups":["Offline - MT"]},{"lat":25.8739615,"lon":87.8391252,"city":"Dalkhola","state":"West Bengal","new_km":1278.8,"cur_km":1257.0,"saving_km":-21.8,"closer":"current","cbm":0.54,"groups":["Offline - MT"]},{"lat":25.0057449,"lon":88.1398483,"city":"English Bazar","state":"West Bengal","new_km":1344.0,"cur_km":1324.0,"saving_km":-20.0,"closer":"current","cbm":0.64,"groups":["Offline - MT"]},{"lat":26.7164,"lon":88.431,"city":"Siliguri","state":"West Bengal","new_km":1305.6,"cur_km":1294.2,"saving_km":-11.4,"closer":"current","cbm":14.36,"groups":["Offline - MT"]},{"lat":19.0308262,"lon":73.0198537,"city":"Navi Mumbai,","state":"Maharashtra","new_km":1284.3,"cur_km":1332.5,"saving_km":48.2,"closer":"new","cbm":1.61,"groups":["Offline Sales-B2B"]},{"lat":17.4337246,"lon":78.5006827,"city":"Secunderabad, Hyderabad","state":"Telangana","new_km":1472.7,"cur_km":1541.1,"saving_km":68.4,"closer":"new","cbm":3.08,"groups":["Offline Sales-B2B"]},{"lat":28.0596936,"lon":76.5766168,"city":"Bawal","state":"Haryana","new_km":74.8,"cur_km":57.2,"saving_km":-17.6,"closer":"current","cbm":4.16,"groups":["Offline Sales-B2B"]},{"lat":28.0599,"lon":77.3223,"city":"Palwal","state":"Haryana","new_km":32.2,"cur_km":83.8,"saving_km":51.6,"closer":"new","cbm":20.28,"groups":["Offline - MT"]},{"lat":28.1956,"lon":76.6165,"city":"Rewari","state":"Haryana","new_km":63.6,"cur_km":38.5,"saving_km":-25.1,"closer":"current","cbm":20.46,"groups":["Offline Sales-B2B","Offline \u2013 GT","Others"]},{"lat":10.8071144,"lon":78.6880939,"city":"Tiruchirappalli","state":"Tamil Nadu","new_km":2337.2,"cur_km":2401.9,"saving_km":64.7,"closer":"new","cbm":0.89,"groups":["Offline Sales-B2B"]},{"lat":28.6758864,"lon":77.321446,"city":"Dilshad Garden","state":"Delhi","new_km":68.9,"cur_km":74.6,"saving_km":5.7,"closer":"new","cbm":0.01,"groups":["Store4-Ghaziabad"]},{"lat":21.6293206,"lon":72.9945103,"city":"Ankleshwar","state":"Gujarat","new_km":1026.7,"cur_km":1019.0,"saving_km":-7.7,"closer":"current","cbm":0.01,"groups":["Store4-Ghaziabad"]},{"lat":28.6769948,"lon":77.4013901,"city":"Raj Nagar Extension","state":"Uttar Pradesh","new_km":72.9,"cur_km":81.8,"saving_km":8.9,"closer":"new","cbm":0.01,"groups":["Store4-Ghaziabad"]},{"lat":28.6677,"lon":77.3682,"city":"Sahibabad","state":"Uttar Pradesh","new_km":70.0,"cur_km":77.6,"saving_km":7.6,"closer":"new","cbm":0.02,"groups":["Store4-Ghaziabad"]},{"lat":28.6995123,"lon":77.1301047,"city":"Pitampura","state":"Delhi","new_km":70.6,"cur_km":56.5,"saving_km":-14.1,"closer":"current","cbm":null,"groups":[]},{"lat":28.6215226,"lon":77.0611064,"city":"Uttam Nagar","state":"Delhi","new_km":66.7,"cur_km":43.2,"saving_km":-23.5,"closer":"current","cbm":0.01,"groups":["Store4-Ghaziabad"]},{"lat":16.5114,"lon":80.6253,"city":"Vijayawada","state":"Andhra Pradesh","new_km":1674.4,"cur_km":1746.2,"saving_km":71.8,"closer":"new","cbm":null,"groups":[]},{"lat":22.7191072,"lon":88.4826229,"city":"Barasat","state":"West Bengal","new_km":1430.1,"cur_km":1483.5,"saving_km":53.4,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":26.75,"lon":88.25,"city":"Darjiling","state":"West Bengal","new_km":1291.0,"cur_km":1273.8,"saving_km":-17.2,"closer":"current","cbm":1.07,"groups":["Offline - MT"]},{"lat":27.329046,"lon":88.6122673,"city":"Gangtok","state":"Sikkim","new_km":1412.5,"cur_km":1417.3,"saving_km":4.8,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":22.8015194,"lon":86.2029579,"city":"Jamshedpur","state":"Jharkhand","new_km":1285.9,"cur_km":1349.0,"saving_km":63.1,"closer":"new","cbm":2.89,"groups":["Offline - MT"]},{"lat":24.4931239,"lon":85.5560811,"city":"Koderma","state":"Jharkhand","new_km":1078.7,"cur_km":1163.4,"saving_km":84.7,"closer":"new","cbm":1.29,"groups":["Offline - MT"]},{"lat":24.4898318,"lon":86.6990182,"city":"Deoghar","state":"Jharkhand","new_km":1183.1,"cur_km":1285.9,"saving_km":102.8,"closer":"new","cbm":1.29,"groups":["Offline - MT"]},{"lat":23.0054108,"lon":88.4898057,"city":"Madanpur","state":"West Bengal","new_km":1404.4,"cur_km":1466.3,"saving_km":61.9,"closer":"new","cbm":0.75,"groups":["Offline - MT"]},{"lat":13.325036,"lon":79.6480611,"city":"Chittoor","state":"Andhra Pradesh","new_km":2068.4,"cur_km":2153.8,"saving_km":85.4,"closer":"new","cbm":null,"groups":[]},{"lat":21.455228,"lon":80.1962729,"city":"Gondia","state":"Maharashtra","new_km":1009.0,"cur_km":1016.8,"saving_km":7.8,"closer":"new","cbm":null,"groups":[]},{"lat":27.4955539,"lon":77.6855554,"city":"Mathura","state":"Uttar Pradesh","new_km":104.1,"cur_km":169.7,"saving_km":65.6,"closer":"new","cbm":0.01,"groups":["Store4-Ghaziabad"]},{"lat":23.6871297,"lon":86.9746587,"city":"Asansol","state":"West Bengal","new_km":1211.6,"cur_km":1275.2,"saving_km":63.6,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":23.2495714,"lon":87.8681751,"city":"Bardhaman","state":"West Bengal","new_km":1319.5,"cur_km":1390.0,"saving_km":70.5,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":23.5350475,"lon":87.3380425,"city":"Durgapur","state":"West Bengal","new_km":1257.2,"cur_km":1320.3,"saving_km":63.1,"closer":"new","cbm":3.21,"groups":["Offline - MT"]},{"lat":22.028124,"lon":88.0632655,"city":"Haldia","state":"West Bengal","new_km":1522.1,"cur_km":1489.3,"saving_km":-32.8,"closer":"current","cbm":1.39,"groups":["Offline - MT"]},{"lat":24.830302,"lon":92.7875689,"city":"Silchar","state":"Assam","new_km":2005.3,"cur_km":1960.3,"saving_km":-45.0,"closer":"current","cbm":1.29,"groups":["Offline - MT"]},{"lat":26.7577925,"lon":94.2079645,"city":"Jorhat","state":"Assam","new_km":1998.7,"cur_km":2063.7,"saving_km":65.0,"closer":"new","cbm":1.29,"groups":["Offline - MT"]},{"lat":23.8312377,"lon":91.2823821,"city":"Agartala","state":"Tripura","new_km":1789.6,"cur_km":1860.2,"saving_km":70.6,"closer":"new","cbm":2.68,"groups":["Offline - MT"]},{"lat":24.7964355,"lon":85.0079563,"city":"Gaya","state":"Bihar","new_km":989.1,"cur_km":1041.6,"saving_km":52.5,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":25.6905702,"lon":85.2090351,"city":"Hajipur","state":"Bihar","new_km":960.7,"cur_km":1014.4,"saving_km":53.7,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":25.1364914,"lon":85.4436546,"city":"Nalanda","state":"Bihar","new_km":1023.4,"cur_km":1067.1,"saving_km":43.7,"closer":"new","cbm":1.29,"groups":["Offline - MT"]},{"lat":27.4844597,"lon":94.9019447,"city":"Dibrugarh","state":"Assam","new_km":2136.9,"cur_km":2129.8,"saving_km":-7.1,"closer":"current","cbm":1.29,"groups":["Offline - MT"]},{"lat":29.028405,"lon":79.4832094,"city":"Pantnagar","state":"Uttarakhand","new_km":321.2,"cur_km":325.9,"saving_km":4.7,"closer":"new","cbm":4.23,"groups":["Offline Sales-B2B"]},{"lat":28.5864481,"lon":76.979153,"city":"South West Delhi","state":"Delhi","new_km":53.5,"cur_km":32.2,"saving_km":-21.3,"closer":"current","cbm":4.43,"groups":["Offline \u2013 GT"]},{"lat":16.2915189,"lon":80.4541588,"city":"Guntur","state":"Andhra Pradesh","new_km":1707.1,"cur_km":1769.9,"saving_km":62.8,"closer":"new","cbm":0.44,"groups":["Offline - MT"]},{"lat":16.9956639,"lon":81.7154378,"city":"East Godavari","state":"Andhra Pradesh","new_km":1731.2,"cur_km":1727.9,"saving_km":-3.3,"closer":"current","cbm":0.44,"groups":["Offline - MT"]},{"lat":28.3671851,"lon":76.920669,"city":"Imt Manesar Gurgaon,","state":"Haryana","new_km":43.3,"cur_km":20.2,"saving_km":-23.1,"closer":"current","cbm":0.07,"groups":["Others"]},{"lat":12.7183,"lon":77.8229,"city":"Hosur","state":"Tamil Nadu","new_km":2057.9,"cur_km":2134.8,"saving_km":76.9,"closer":"new","cbm":29.68,"groups":["Offline Sales-B2B","Store 2-Lucknow"]},{"lat":27.0979659,"lon":93.6237291,"city":"Itanagar","state":"Arunachal Pradesh","new_km":1976.9,"cur_km":2015.5,"saving_km":38.6,"closer":"new","cbm":1.07,"groups":["Offline - MT"]},{"lat":23.661154,"lon":87.6962424,"city":"Bolpur","state":"West Bengal","new_km":1309.6,"cur_km":1348.3,"saving_km":38.7,"closer":"new","cbm":1.29,"groups":["Offline - MT"]},{"lat":22.6947839,"lon":88.4530183,"city":"Madhyamgram","state":"West Bengal","new_km":1425.4,"cur_km":1482.1,"saving_km":56.7,"closer":"new","cbm":3.21,"groups":["Offline - MT"]},{"lat":25.4381302,"lon":81.8338005,"city":"Prayagraj","state":"Uttar Pradesh","new_km":628.9,"cur_km":740.2,"saving_km":111.3,"closer":"new","cbm":1.2,"groups":["Offline \u2013 GT"]},{"lat":24.578721,"lon":73.6862571,"city":"Udaipur","state":"Rajasthan","new_km":634.7,"cur_km":677.4,"saving_km":42.7,"closer":"new","cbm":6.17,"groups":["Offline Sales-B2B"]},{"lat":26.2615608,"lon":91.6940301,"city":"Changsari","state":"Assam","new_km":1715.8,"cur_km":1783.7,"saving_km":67.9,"closer":"new","cbm":null,"groups":[]},{"lat":28.5339201,"lon":77.2124474,"city":"Malviya Nagar","state":"Delhi","new_km":55.3,"cur_km":55.2,"saving_km":-0.1,"closer":"current","cbm":9.33,"groups":["Offline Sales-B2B"]},{"lat":27.8900657,"lon":76.2858227,"city":"Behror","state":"Rajasthan","new_km":108.4,"cur_km":99.9,"saving_km":-8.5,"closer":"current","cbm":0.92,"groups":["Offline Sales-B2B"]},{"lat":21.1545412,"lon":77.6442962,"city":"Amravati","state":"Maharashtra","new_km":1018.5,"cur_km":975.1,"saving_km":-43.4,"closer":"current","cbm":1.92,"groups":["Offline - MT"]},{"lat":19.877263,"lon":75.3390241,"city":"Aurangabad","state":"Maharashtra","new_km":1116.1,"cur_km":1152.5,"saving_km":36.4,"closer":"new","cbm":0.69,"groups":["Offline - MT"]},{"lat":32.7185614,"lon":74.8580917,"city":"Jammu","state":"Jammu and Kashmir","new_km":670.4,"cur_km":617.6,"saving_km":-52.8,"closer":"current","cbm":4.2,"groups":["Offline - MT"]},{"lat":25.1737019,"lon":75.8574194,"city":"Kota","state":"Rajasthan","new_km":416.4,"cur_km":480.5,"saving_km":64.1,"closer":"new","cbm":3.24,"groups":["Offline - MT"]},{"lat":26.142124,"lon":91.7263181,"city":"Guwahati  Kamrup","state":"Assam","new_km":1719.0,"cur_km":1791.0,"saving_km":72.0,"closer":"new","cbm":16.45,"groups":["Offline Sales-B2B"]},{"lat":26.9421406,"lon":81.3856087,"city":"Barabanki","state":"Uttar Pradesh","new_km":487.4,"cur_km":594.2,"saving_km":106.8,"closer":"new","cbm":null,"groups":[]},{"lat":25.5858278,"lon":85.0964126,"city":"Patna  Bihar","state":"Bihar","new_km":936.4,"cur_km":1007.6,"saving_km":71.2,"closer":"new","cbm":null,"groups":[]},{"lat":22.5786572,"lon":75.2258637,"city":"Dhar","state":"Madhya Pradesh","new_km":772.5,"cur_km":820.3,"saving_km":47.8,"closer":"new","cbm":1.65,"groups":["Offline Sales-B2B"]},{"lat":12.3051828,"lon":76.6553609,"city":"Mysuru","state":"Karnataka","new_km":2062.5,"cur_km":2143.8,"saving_km":81.3,"closer":"new","cbm":0.07,"groups":["Offline Sales-B2B"]},{"lat":12.8796052,"lon":79.7042762,"city":"Kancheepuram","state":"Tamil Nadu","new_km":2119.2,"cur_km":2141.0,"saving_km":21.8,"closer":"new","cbm":0.3,"groups":["Offline Sales-B2B"]},{"lat":27.8761073,"lon":78.1358153,"city":"Aligarh","state":"Uttar Pradesh","new_km":111.2,"cur_km":181.3,"saving_km":70.1,"closer":"new","cbm":0.39,"groups":["Offline Sales-B2B","Offline \u2013 GT","Others"]},{"lat":23.9153329,"lon":91.3879341,"city":"Tripura","state":"Tripura","new_km":1809.9,"cur_km":1867.9,"saving_km":58.0,"closer":"new","cbm":10.51,"groups":["Offline Sales-B2B"]},{"lat":29.9693747,"lon":76.8482787,"city":"Kurukshetra","state":"Haryana","new_km":246.6,"cur_km":208.1,"saving_km":-38.5,"closer":"current","cbm":0.1,"groups":["Offline Sales-B2B"]},{"lat":24.0622,"lon":87.6983,"city":"Birbhum","state":"West Bengal","new_km":1317.9,"cur_km":1325.7,"saving_km":7.8,"closer":"new","cbm":12.66,"groups":["Offline Sales-B2B"]},{"lat":12.8698101,"lon":74.8430082,"city":"Mangalore","state":"Karnataka","new_km":2032.8,"cur_km":2082.5,"saving_km":49.7,"closer":"new","cbm":null,"groups":[]},{"lat":26.2967719,"lon":73.0351433,"city":"Jodhpur","state":"Rajasthan","new_km":555.5,"cur_km":563.8,"saving_km":8.3,"closer":"new","cbm":0.04,"groups":["Offline Sales-B2B"]},{"lat":31.1041526,"lon":77.1709729,"city":"Shimla","state":"Himachal Pradesh","new_km":434.0,"cur_km":347.8,"saving_km":-86.2,"closer":"current","cbm":null,"groups":[]},{"lat":17.8499067,"lon":75.2763203,"city":"Solapur","state":"Maharashtra","new_km":1358.5,"cur_km":1420.8,"saving_km":62.3,"closer":"new","cbm":0.93,"groups":["Offline Sales-B2B"]},{"lat":17.5512916,"lon":80.6144535,"city":"Kothagudem","state":"Telangana","new_km":1607.6,"cur_km":1586.2,"saving_km":-21.4,"closer":"current","cbm":0.36,"groups":["Offline Sales-B2B"]},{"lat":17.2465351,"lon":80.1500326,"city":"Khammam","state":"Telangana","new_km":1555.4,"cur_km":1609.8,"saving_km":54.4,"closer":"new","cbm":0.36,"groups":["Offline Sales-B2B"]},{"lat":28.5335,"lon":77.2935,"city":"Sarita Vihar","state":"Delhi","new_km":51.5,"cur_km":65.0,"saving_km":13.5,"closer":"new","cbm":0.1,"groups":["Others"]},{"lat":12.3348344,"lon":76.6872898,"city":"Shantinagar","state":"Karnataka","new_km":2059.6,"cur_km":2139.8,"saving_km":80.2,"closer":"new","cbm":0.77,"groups":["Offline Sales-B2B"]},{"lat":26.2290186,"lon":76.3043561,"city":"Sawai Madhopur","state":"Rajasthan","new_km":267.2,"cur_km":321.2,"saving_km":54.0,"closer":"new","cbm":0.13,"groups":["Offline Sales-B2B"]},{"lat":28.2047781,"lon":74.6912996,"city":"Churu","state":"Rajasthan","new_km":309.0,"cur_km":263.7,"saving_km":-45.3,"closer":"current","cbm":0.11,"groups":["Offline Sales-B2B"]},{"lat":26.8048659,"lon":76.4437457,"city":"Dausa","state":"Rajasthan","new_km":200.4,"cur_km":237.2,"saving_km":36.8,"closer":"new","cbm":0.45,"groups":["Offline Sales-B2B"]},{"lat":28.0194,"lon":73.3145,"city":"Bikaner","state":"Rajasthan","new_km":424.5,"cur_km":438.9,"saving_km":14.4,"closer":"new","cbm":0.14,"groups":["Offline Sales-B2B"]},{"lat":16.9344152,"lon":77.7788338,"city":"Rangareddy","state":"Telangana","new_km":1602.8,"cur_km":1599.7,"saving_km":-3.1,"closer":"current","cbm":18.2,"groups":["Offline Sales-B2B"]},{"lat":28.368716,"lon":77.5970121,"city":"Gautam Buddha Nagar,","state":"Uttar Pradesh","new_km":84.1,"cur_km":99.3,"saving_km":15.2,"closer":"new","cbm":2.93,"groups":["Offline Sales-B2B"]},{"lat":28.6758661,"lon":77.2985078,"city":"Shahdara","state":"Delhi","new_km":72.2,"cur_km":72.1,"saving_km":-0.1,"closer":"current","cbm":0.16,"groups":["Offline Sales-B2B","Store 2-Lucknow"]},{"lat":26.6262805,"lon":88.7334485,"city":"Jalpaiguri","state":"West Bengal","new_km":1361.0,"cur_km":1329.2,"saving_km":-31.8,"closer":"current","cbm":22.24,"groups":["Offline Sales-B2B"]},{"lat":22.1106181,"lon":88.509018,"city":"Baltala","state":"Punjab","new_km":1488.1,"cur_km":1636.5,"saving_km":148.4,"closer":"new","cbm":0.07,"groups":["Store3-Zirakpur"]},{"lat":23.5068361,"lon":88.2468822,"city":"Burdwan (East Burdwan/West  Burdwan)","state":"West Bengal","new_km":1373.8,"cur_km":1412.3,"saving_km":38.5,"closer":"new","cbm":3.09,"groups":["Offline Sales-B2B"]},{"lat":28.6360207,"lon":77.101822,"city":"Ashok Nagar","state":"Delhi","new_km":70.1,"cur_km":48.4,"saving_km":-21.7,"closer":"current","cbm":0.94,"groups":["Offline Sales-B2B"]},{"lat":22.0521107,"lon":88.0712466,"city":"East/West Midnapore","state":"West Bengal","new_km":1517.5,"cur_km":1488.3,"saving_km":-29.2,"closer":"current","cbm":2.83,"groups":["Offline Sales-B2B"]},{"lat":23.0015941,"lon":72.2595567,"city":"Ahmedabad Gujarat","state":"Gujarat","new_km":928.6,"cur_km":907.8,"saving_km":-20.8,"closer":"current","cbm":0.03,"groups":["Offline Sales-B2B"]},{"lat":23.132377,"lon":87.2081925,"city":"Bankura","state":"West Bengal","new_km":1302.1,"cur_km":1333.0,"saving_km":30.9,"closer":"new","cbm":0.1,"groups":["Offline Sales-B2B"]},{"lat":23.2377409,"lon":87.8706659,"city":"West Burdwan","state":"West Bengal","new_km":1320.9,"cur_km":1391.0,"saving_km":70.1,"closer":"new","cbm":0.16,"groups":["Offline Sales-B2B"]},{"lat":24.1745993,"lon":88.2721335,"city":"Murshidabad","state":"West Bengal","new_km":1416.6,"cur_km":1378.0,"saving_km":-38.6,"closer":"current","cbm":1.5,"groups":["Offline Sales-B2B"]},{"lat":26.4817534,"lon":89.5273056,"city":"Jalpaiguri Alipurduar","state":"West Bengal","new_km":1439.0,"cur_km":1418.8,"saving_km":-20.2,"closer":"current","cbm":0.07,"groups":["Offline Sales-B2B"]},{"lat":10.659037,"lon":79.2014278,"city":"Thanjavur","state":"Tamil Nadu","new_km":2403.1,"cur_km":2429.3,"saving_km":26.2,"closer":"new","cbm":null,"groups":[]},{"lat":30.7488437,"lon":76.6428994,"city":"Kharar","state":"Punjab","new_km":347.9,"cur_km":306.2,"saving_km":-41.7,"closer":"current","cbm":0.12,"groups":["Store3-Zirakpur"]},{"lat":28.6064,"lon":76.6536,"city":"Khalikpur,Jhajjar","state":"Haryana","new_km":80.6,"cur_km":26.6,"saving_km":-54.0,"closer":"current","cbm":1124.17,"groups":["BlinkIT"]},{"lat":28.367,"lon":77.5025,"city":"Gautambuddha Nagar","state":"Uttar Pradesh","new_km":67.9,"cur_km":88.1,"saving_km":20.2,"closer":"new","cbm":1117.82,"groups":["BlinkIT","Offline Sales-B2B"]},{"lat":28.367,"lon":77.5025,"city":"Gautam Budha Nagar","state":"Uttar Pradesh","new_km":67.9,"cur_km":88.1,"saving_km":20.2,"closer":"new","cbm":0.12,"groups":["Corporate Sales Debtors"]},{"lat":22.6708,"lon":72.63,"city":"Hariyala","state":"Gujarat","new_km":932.4,"cur_km":919.0,"saving_km":-13.4,"closer":"current","cbm":36.02,"groups":["Zepto"]},{"lat":28.35,"lon":76.8,"city":"Farukhnagar","state":"Haryana","new_km":54.6,"cur_km":12.9,"saving_km":-41.7,"closer":"current","cbm":0.47,"groups":["Corporate Sales Debtors"]},{"lat":28.55,"lon":76.83,"city":"Dadri Toe","state":"Haryana","new_km":70.9,"cur_km":16.1,"saving_km":-54.8,"closer":"current","cbm":29.38,"groups":["Amazon"]},{"lat":19.3607,"lon":72.8362,"city":"Taluka-Vasai , Thane 401208","state":"Maharashtra","new_km":1284.5,"cur_km":1299.2,"saving_km":14.7,"closer":"new","cbm":2.11,"groups":["Offline Sales-B2B"]},{"lat":28.5355,"lon":77.391,"city":"Noida Bahlolpur","state":"Uttar Pradesh","new_km":62.1,"cur_km":75.1,"saving_km":13.0,"closer":"new","cbm":1.16,"groups":["Offline Sales-B2B"]},{"lat":30.7463,"lon":76.6514,"city":"Khrar","state":"Punjab","new_km":347.7,"cur_km":305.8,"saving_km":-41.9,"closer":"current","cbm":0.12,"groups":["Store3-Zirakpur"]},{"lat":29.9695,"lon":76.8783,"city":"Kurkshetra","state":"Haryana","new_km":242.8,"cur_km":208.3,"saving_km":-34.5,"closer":"current","cbm":0.58,"groups":["Store3-Zirakpur"]},{"lat":18.5204,"lon":73.8567,"city":"Pune Moffusil","state":"Maharashtra","new_km":1308.1,"cur_km":1366.8,"saving_km":58.7,"closer":"new","cbm":0.04,"groups":["Offline Sales-B2B"]},{"lat":11.9401,"lon":79.4861,"city":"Ammaiagaram Villupuram","state":"Tamil Nadu","new_km":2255.4,"cur_km":2262.3,"saving_km":6.9,"closer":"new","cbm":3.5,"groups":["Offline Sales-B2B"]},{"lat":30.5901,"lon":76.8424,"city":"Derabassi","state":"Punjab","new_km":315.3,"cur_km":284.8,"saving_km":-30.5,"closer":"current","cbm":0.21,"groups":["Store3-Zirakpur"]},{"lat":19.076,"lon":72.8777,"city":"Westmumbai","state":"Maharashtra","new_km":1286.6,"cur_km":1332.9,"saving_km":46.3,"closer":"new","cbm":null,"groups":[]},{"lat":22.75,"lon":73.6,"city":"Panchmahals","state":"Gujarat","new_km":828.5,"cur_km":851.5,"saving_km":23.0,"closer":"new","cbm":2.05,"groups":["Offline Sales-B2B"]},{"lat":28.6064,"lon":76.6536,"city":"B200 Block At Village Luhari, Tehsil And Distract Jhajjar,","state":"Haryana","new_km":80.6,"cur_km":26.6,"saving_km":-54.0,"closer":"current","cbm":37.47,"groups":["Amazon"]},{"lat":22.62,"lon":88.45,"city":"North 24 Pgs","state":"West Bengal","new_km":1425.1,"cur_km":1486.6,"saving_km":61.5,"closer":"new","cbm":null,"groups":[]},{"lat":26.23,"lon":81.23,"city":"Raibareli","state":"Uttar Pradesh","new_km":506.6,"cur_km":619.4,"saving_km":112.8,"closer":"new","cbm":null,"groups":[]},{"lat":20.5992,"lon":72.9342,"city":"Valsadd","state":"Gujarat","new_km":1154.9,"cur_km":1147.4,"saving_km":-7.5,"closer":"current","cbm":null,"groups":[]},{"lat":10.1073,"lon":76.473,"city":"Perumbavoo","state":"Kerala","new_km":2385.6,"cur_km":2416.6,"saving_km":31.0,"closer":"new","cbm":null,"groups":[]},{"lat":17.4947,"lon":78.3996,"city":"Chaitanya Nagar Kukatpally","state":"Telangana","new_km":1479.0,"cur_km":1531.0,"saving_km":52.0,"closer":"new","cbm":null,"groups":[]},{"lat":14.4426,"lon":79.9865,"city":"Nellore","state":"Andhra Pradesh","new_km":1896.6,"cur_km":2008.0,"saving_km":111.4,"closer":"new","cbm":null,"groups":[]},{"lat":16.705,"lon":74.2433,"city":"Kolhapur","state":"Maharashtra","new_km":1515.1,"cur_km":1591.8,"saving_km":76.7,"closer":"new","cbm":null,"groups":[]},{"lat":25.7069,"lon":93.7276,"city":"Dimapur","state":"Nagaland","new_km":2029.4,"cur_km":2065.4,"saving_km":36.0,"closer":"new","cbm":null,"groups":[]},{"lat":24.817,"lon":93.9368,"city":"Imphal","state":"Manipur","new_km":2184.1,"cur_km":2122.2,"saving_km":-61.9,"closer":"current","cbm":null,"groups":[]},{"lat":28.8683,"lon":77.1188,"city":"Kundli","state":"Haryana","new_km":91.4,"cur_km":71.1,"saving_km":-20.3,"closer":"current","cbm":null,"groups":[]},{"lat":28.359,"lon":76.9394,"city":"Manesar","state":"Haryana","new_km":40.9,"cur_km":22.7,"saving_km":-18.2,"closer":"current","cbm":null,"groups":[]},{"lat":28.2096,"lon":76.8609,"city":"Bhiwadi","state":"Rajasthan","new_km":34.6,"cur_km":34.9,"saving_km":0.3,"closer":"new","cbm":null,"groups":[]},{"lat":22.0797,"lon":82.1391,"city":"Bilaspur","state":"Chhattisgarh","new_km":1056.6,"cur_km":1077.8,"saving_km":21.2,"closer":"new","cbm":null,"groups":[]}];

const STS=[{"name":"Haryana","total":50,"new_closer":7,"cur_closer":43,"avg_saving":-20.5},{"name":"Uttar Pradesh","total":50,"new_closer":44,"cur_closer":6,"avg_saving":41.4},{"name":"West Bengal","total":44,"new_closer":31,"cur_closer":13,"avg_saving":29.7},{"name":"Maharashtra","total":41,"new_closer":39,"cur_closer":2,"avg_saving":41.4},{"name":"Delhi","total":33,"new_closer":6,"cur_closer":27,"avg_saving":-5.5},{"name":"Karnataka","total":26,"new_closer":25,"cur_closer":1,"avg_saving":47.1},{"name":"Gujarat","total":25,"new_closer":2,"cur_closer":23,"avg_saving":-6.6},{"name":"Punjab","total":20,"new_closer":1,"cur_closer":19,"avg_saving":-31.2},{"name":"Tamil Nadu","total":19,"new_closer":19,"cur_closer":0,"avg_saving":61.9},{"name":"Rajasthan","total":19,"new_closer":13,"cur_closer":6,"avg_saving":11.1},{"name":"Madhya Pradesh","total":17,"new_closer":17,"cur_closer":0,"avg_saving":53.4},{"name":"Telangana","total":15,"new_closer":13,"cur_closer":2,"avg_saving":53.4},{"name":"Jharkhand","total":10,"new_closer":10,"cur_closer":0,"avg_saving":88.6},{"name":"Bihar","total":10,"new_closer":10,"cur_closer":0,"avg_saving":57.4},{"name":"Odisha","total":9,"new_closer":9,"cur_closer":0,"avg_saving":87.1},{"name":"Andhra Pradesh","total":8,"new_closer":7,"cur_closer":1,"avg_saving":64.1},{"name":"Assam","total":8,"new_closer":6,"cur_closer":2,"avg_saving":43.6},{"name":"Himachal Pradesh","total":5,"new_closer":0,"cur_closer":5,"avg_saving":-73.3},{"name":"Uttarakhand","total":5,"new_closer":1,"cur_closer":4,"avg_saving":-15.0},{"name":"Goa","total":4,"new_closer":4,"cur_closer":0,"avg_saving":41.5},{"name":"Chandigarh","total":4,"new_closer":0,"cur_closer":4,"avg_saving":-25.9},{"name":"Kerala","total":3,"new_closer":3,"cur_closer":0,"avg_saving":34.9},{"name":"Chhattisgarh","total":3,"new_closer":3,"cur_closer":0,"avg_saving":37.0},{"name":"Tripura","total":2,"new_closer":2,"cur_closer":0,"avg_saving":64.3},{"name":"New Delhi","total":1,"new_closer":1,"cur_closer":0,"avg_saving":1.2},{"name":"Sikkim","total":1,"new_closer":1,"cur_closer":0,"avg_saving":4.8},{"name":"Arunachal Pradesh","total":1,"new_closer":1,"cur_closer":0,"avg_saving":38.6},{"name":"Jammu and Kashmir","total":1,"new_closer":0,"cur_closer":1,"avg_saving":-52.8},{"name":"Nagaland","total":1,"new_closer":1,"cur_closer":0,"avg_saving":36.0},{"name":"Manipur","total":1,"new_closer":0,"cur_closer":1,"avg_saving":-61.9}];


// Filter to Haryana only
var ALL_LOCS=LOCS;
LOCS=ALL_LOCS.filter(function(l){return l.state.trim().toLowerCase()==='haryana'});

const NW={lat:28.21606,lng:77.16792},CW={lat:28.44208,lng:76.77461};
let filter_='all',heat_=false,arcs_=false,currentView_='haryana',sort_='impact';

// ============ VIEW TOGGLE ============
function setView(v){
  currentView_ = v;
  var isHR = v === 'haryana';
  LOCS = isHR ? ALL_LOCS.filter(function(l){return l.state.trim().toLowerCase()==='haryana'}) : ALL_LOCS;
  filter_ = 'all';
  var nNew = LOCS.filter(function(l){return l.closer==='new'}).length;
  var nCur = LOCS.filter(function(l){return l.closer==='current'}).length;
  var total = LOCS.length;
  var pctNew = Math.round(nNew/total*100);
  var pctCur = Math.round(nCur/total*100);

  // ── Header title & subtitle
  document.querySelector('#hdr h1').textContent = isHR ? 'Haryana \u2014 Warehouse Relocation' : 'Warehouse Relocation Intelligence';
  document.querySelector('#hdr p').textContent = isHR ? 'Lifelong Online \u00B7 Haryana State Network' : 'Lifelong Online \u00B7 Delivery Network Analysis';

  // ── KPI cards (animated counters + static values)
  aN('k1', nNew);
  aN('k2', nCur);
  document.querySelector('.kpi.a .kpi-v').textContent = isHR ? '222' : '1.69M';
  document.querySelector('.kpi.b .kpi-v').textContent = total;
  document.querySelector('.kpi.g .kpi-s').textContent = pctNew + '% of network';
  document.querySelector('.kpi.r .kpi-s').textContent = pctCur + '% of network';
  document.querySelector('.kpi.a .kpi-s').textContent = 'with relocation';
  document.querySelector('.kpi.b .kpi-s').textContent = isHR ? 'Haryana only' : '28 states';

  // ── Analytics panel labels
  document.querySelector('#topS').parentElement.querySelector('.ana-l').textContent = isHR ? 'Most Benefiting Cities' : 'Top Benefiting States';
  document.querySelector('#losS').parentElement.querySelector('.ana-l').textContent = isHR ? 'Most Impacted Cities' : 'Top Impacted States';

  // ── Donut info text
  document.querySelector('.donut-c .pct').textContent = pctNew + '%';
  var donutInfo = document.querySelector('.donut-info');
  donutInfo.children[0].lastChild.textContent = nNew;
  donutInfo.children[1].lastChild.textContent = nCur;

  // ── Filter chips
  document.querySelectorAll('.ch').forEach(function(c){c.className='ch'});
  document.querySelector('.ch[data-f="all"]').classList.add('c-all');
  document.querySelector('.ch[data-f="all"]').textContent = 'All \u00B7 ' + total;
  document.querySelector('.ch[data-f="new"]').textContent = '\u25CF New WH \u00B7 ' + nNew;
  document.querySelector('.ch[data-f="current"]').textContent = '\u25CF Current \u00B7 ' + nCur;

  // ── Sidebar header & search
  document.querySelector('#side .side-hdr h2').textContent = isHR ? 'Haryana Network' : 'All India Network';
  document.querySelector('#side .side-hdr p').textContent = total + ' delivery locations' + (isHR ? ' across Haryana' : ' \u00B7 28 states');
  document.getElementById('sbox').placeholder = isHR ? 'Search Haryana city...' : 'Search city or state...';
  document.getElementById('sbox').value = '';
  // Reset sort to impact on view change
  sort_ = 'impact';
  document.querySelectorAll('.so').forEach(function(b){b.classList.toggle('active',b.getAttribute('data-s')==='impact')});

  // ── Map
  if(isHR) leafMap.flyTo([29.0,76.4], 8, {duration:1.2});
  else leafMap.flyTo([22,79], 5, {duration:1.2});

  drawMap();

  // ── Re-render analytics if panel is open
  if(document.getElementById('ana').classList.contains('open')) renderAna();
}

// ============ SIDEBAR MOBILE ============
function toggleSidebar(){
  const s=document.getElementById('side'),o=document.getElementById('sideOverlay'),b=document.getElementById('menuBtn');
  s.classList.toggle('open');
  if(s.classList.contains('open')){o.style.display='block';setTimeout(()=>o.classList.add('show'),10);b.classList.add('active');}
  else{o.classList.remove('show');setTimeout(()=>o.style.display='none',300);b.classList.remove('active');}
}
function closeSidebar(){
  document.getElementById('side').classList.remove('open');
  const o=document.getElementById('sideOverlay'),b=document.getElementById('menuBtn');
  o.classList.remove('show');setTimeout(()=>o.style.display='none',300);b.classList.remove('active');
}

// ============ ANALYTICS TOGGLE ============
function toggleAnalytics(){
  const a=document.getElementById('ana'),b=document.getElementById('anaBtn');
  if(a.classList.contains('open')){
    a.style.transform='translateY(100%)';
    setTimeout(()=>{a.classList.remove('open');a.style.transform='';},400);
    b.classList.remove('active');
  } else {
    a.style.display='flex';a.classList.add('open');
    requestAnimationFrame(()=>requestAnimationFrame(()=>{a.style.transform='translateY(0)';}));
    b.classList.add('active');
    renderAna();
  }
}

// ============ LEAFLET MAP ============
let leafMap,mLayer;
function initMap(){
  leafMap=L.map('map',{center:[29.0,76.4],zoom:8,zoomControl:false,attributionControl:false,preferCanvas:true});
  L.control.zoom({position:'topright'}).addTo(leafMap);
  L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',{maxZoom:18}).addTo(leafMap);
  mLayer=L.layerGroup().addTo(leafMap);
  function whI(t){var c=t==='n'?'wh-n':'wh-x',lb=t==='n'?'PROPOSED':'CURRENT';return L.divIcon({className:'',html:'<div class="wh-mk '+c+'"><div class="wh-r2"></div><div class="wh-r1"></div><div class="wh-core"></div><div class="wh-lb">'+lb+'</div></div>',iconSize:[28,28],iconAnchor:[14,14]})}
  L.marker([NW.lat,NW.lng],{icon:whI('n'),zIndexOffset:2000}).bindPopup('<div style="text-align:center;font-family:DM Sans,sans-serif"><b style="color:#16A169;font-size:15px">Proposed New Warehouse</b><br><span style="color:#8C8177;font-size:11px">28\u00B012\'57.8"N, 77\u00B010\'04.5"E</span><br><b style="color:#16A169;margin-top:6px;display:block">276 locations closer</b></div>').addTo(leafMap);
  L.marker([CW.lat,CW.lng],{icon:whI('x'),zIndexOffset:2000}).bindPopup('<div style="text-align:center;font-family:DM Sans,sans-serif"><b style="color:#DE1C1C;font-size:15px">Current WH \u2014 Farukhnagar</b><br><span style="color:#8C8177;font-size:11px">28\u00B026\'31.5"N, 76\u00B046\'28.6"E</span><br><b style="color:#DE1C1C;margin-top:6px;display:block">160 locations closer</b></div>').addTo(leafMap);

  // Haryana state boundary (red border)
  fetch('https://raw.githubusercontent.com/shklnrj/IndiaStateTopojsonFiles/master/Haryana.geojson')
    .then(function(r){return r.json()})
    .then(function(data){
      L.geoJSON(data,{
        style:{color:'#DE1C1C',weight:2.5,fillColor:'#DE1C1C',fillOpacity:0.04,dashArray:'6 4'}
      }).addTo(leafMap);
    });
}

// Note: innerHTML usage below is safe as all data comes from hardcoded LOCS/STS arrays (no user input)
function drawMap(){
  if(mLayer) mLayer.clearLayers();
  var q=(document.getElementById('sbox').value||'').toLowerCase();
  var cnt=0;
  LOCS.forEach(function(loc){
    if(filter_!=='all'&&loc.closer!==filter_) return;
    if(q&&!loc.city.toLowerCase().includes(q)&&!loc.state.toLowerCase().includes(q)) return;
    cnt++;
    var isN=loc.closer==='new',col=isN?'#16A169':'#DE1C1C';
    var imp=Math.abs(loc.saving_km);
    var r=heat_?Math.max(5,Math.min(20,imp/12+5)):Math.max(3,Math.min(8,imp/35+3));
    var cm=L.circleMarker([loc.lat,loc.lon],{radius:r,fillColor:col,fillOpacity:heat_?Math.min(.8,.3+imp/160):.55,color:'rgba(0,0,0,0.05)',weight:heat_?0:1.5});
    var sP=loc.saving_km>0,sT=sP?'\u2193 Save '+loc.saving_km+' km':'\u2191 +'+Math.abs(loc.saving_km)+' km';
    var popupEl=document.createElement('div');
    popupEl.style.cssText='min-width:230px;font-family:DM Sans,sans-serif';
    var titleEl=document.createElement('div');
    titleEl.style.cssText='font-size:16px;font-weight:700;color:'+col;
    titleEl.textContent=loc.city;
    var stateEl=document.createElement('div');
    stateEl.style.cssText='font-size:11px;color:#8C8177;margin-top:2px';
    stateEl.textContent=loc.state;
    var hr=document.createElement('hr');
    hr.style.cssText='border:none;border-top:1px solid rgba(45,35,25,.08);margin:10px 0';
    var grid=document.createElement('div');
    grid.style.cssText='display:grid;grid-template-columns:1fr 1fr;gap:8px';
    var newBox=document.createElement('div');
    newBox.style.cssText='text-align:center;padding:8px;border-radius:10px;background:#ECFDF5';
    var newLbl=document.createElement('div');
    newLbl.style.cssText='font-size:9px;color:#8C8177;font-weight:700;text-transform:uppercase;letter-spacing:1px;font-family:DM Mono,monospace';
    newLbl.textContent='New WH';
    var newVal=document.createElement('div');
    newVal.style.cssText='font-size:20px;font-weight:800;font-family:DM Mono,monospace;color:#16A169;margin-top:2px';
    newVal.textContent=loc.new_km;
    var newUnit=document.createElement('div');
    newUnit.style.cssText='font-size:9px;color:#8C8177';
    newUnit.textContent='km';
    newBox.appendChild(newLbl);newBox.appendChild(newVal);newBox.appendChild(newUnit);
    var curBox=document.createElement('div');
    curBox.style.cssText='text-align:center;padding:8px;border-radius:10px;background:#FEF2F2';
    var curLbl=document.createElement('div');
    curLbl.style.cssText='font-size:9px;color:#8C8177;font-weight:700;text-transform:uppercase;letter-spacing:1px;font-family:DM Mono,monospace';
    curLbl.textContent='Current';
    var curVal=document.createElement('div');
    curVal.style.cssText='font-size:20px;font-weight:800;font-family:DM Mono,monospace;color:#DE1C1C;margin-top:2px';
    curVal.textContent=loc.cur_km;
    var curUnit=document.createElement('div');
    curUnit.style.cssText='font-size:9px;color:#8C8177';
    curUnit.textContent='km';
    curBox.appendChild(curLbl);curBox.appendChild(curVal);curBox.appendChild(curUnit);
    grid.appendChild(newBox);grid.appendChild(curBox);
    var saveBox=document.createElement('div');
    saveBox.style.cssText='text-align:center;margin-top:8px;padding:8px;border-radius:10px;font-size:13px;font-weight:700;font-family:DM Mono,monospace;'+(sP?'background:#ECFDF5;color:#16A169;border:1px solid #86EFAC':'background:#FEF2F2;color:#DE1C1C;border:1px solid #FECACA');
    saveBox.textContent=sT;
    // CBM + Customer Groups row
    var hr2=document.createElement('hr');
    hr2.style.cssText='border:none;border-top:1px solid rgba(45,35,25,.08);margin:10px 0';
    var metaRow=document.createElement('div');
    metaRow.style.cssText='display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:2px';
    // CBM box
    var cbmBox=document.createElement('div');
    cbmBox.style.cssText='padding:8px;border-radius:10px;background:#FFF8EB;border:1px solid #FDE68A';
    var cbmLbl=document.createElement('div');
    cbmLbl.style.cssText='font-size:9px;color:#8C8177;font-weight:700;text-transform:uppercase;letter-spacing:1px;font-family:DM Mono,monospace';
    cbmLbl.textContent='Total CBM';
    var cbmVal=document.createElement('div');
    cbmVal.style.cssText='font-size:16px;font-weight:800;font-family:DM Mono,monospace;color:#D97706;margin-top:2px';
    cbmVal.textContent=loc.cbm!=null?loc.cbm.toLocaleString():'—';
    cbmBox.appendChild(cbmLbl);cbmBox.appendChild(cbmVal);
    // Customer groups box
    var cgBox=document.createElement('div');
    cgBox.style.cssText='padding:8px;border-radius:10px;background:#F5F3FF;border:1px solid #DDD6FE';
    var cgLbl=document.createElement('div');
    cgLbl.style.cssText='font-size:9px;color:#8C8177;font-weight:700;text-transform:uppercase;letter-spacing:1px;font-family:DM Mono,monospace';
    cgLbl.textContent='Customer Groups';
    var cgVal=document.createElement('div');
    cgVal.style.cssText='font-size:9.5px;font-weight:600;color:#5B21B6;margin-top:3px;line-height:1.5';
    cgVal.textContent=(loc.groups&&loc.groups.length)?loc.groups.join(', '):'—';
    cgBox.appendChild(cgLbl);cgBox.appendChild(cgVal);
    metaRow.appendChild(cbmBox);metaRow.appendChild(cgBox);
    popupEl.appendChild(titleEl);popupEl.appendChild(stateEl);popupEl.appendChild(hr);popupEl.appendChild(grid);popupEl.appendChild(saveBox);popupEl.appendChild(hr2);popupEl.appendChild(metaRow);
    cm.bindPopup(popupEl);
    cm.addTo(mLayer);
  });
  document.getElementById('cnt').textContent=cnt+' locations';
  buildCards(q);
}

function buildCards(q){
  var f=LOCS.filter(function(l){if(filter_!=='all'&&l.closer!==filter_)return false;if(q&&!l.city.toLowerCase().includes(q)&&!l.state.toLowerCase().includes(q))return false;return true}).sort(function(a,b){
    if(sort_==='low_dist') return a.new_km - b.new_km;
    if(sort_==='high_cbm') return (b.cbm||0) - (a.cbm||0);
    return Math.abs(b.saving_km) - Math.abs(a.saving_km); // 'impact' default
  });
  var container=document.getElementById('cards');
  container.textContent='';
  f.slice(0,80).forEach(function(l){
    var c=l.closer==='new'?'g':'r';
    var sc=l.saving_km>0?'pos':'neg';
    var st=l.saving_km>0?('-'+l.saving_km+'km'):('+'+Math.abs(l.saving_km)+'km');
    var cd=document.createElement('div');
    cd.className='cd '+c;
    cd.onclick=function(){fly(l.lat,l.lon)};
    var cdC=document.createElement('div');cdC.className='cd-c';cdC.textContent=l.city;
    var cdS=document.createElement('div');cdS.className='cd-s';cdS.textContent=l.state;
    var cdR=document.createElement('div');cdR.className='cd-r';
    var t1=document.createElement('span');t1.className='cd-t gt';t1.textContent=l.new_km;
    var t2=document.createElement('span');t2.className='cd-t rt';t2.textContent=l.cur_km;
    var sv=document.createElement('span');sv.className='cd-sv '+sc;sv.textContent=st;
    cdR.appendChild(t1);cdR.appendChild(t2);cdR.appendChild(sv);
    var cdM=document.createElement('div');cdM.className='cd-meta';
    if(l.cbm!=null){var cbmTag=document.createElement('span');cbmTag.className='cd-cbm';cbmTag.textContent=l.cbm.toLocaleString()+' CBM';cdM.appendChild(cbmTag);}
    if(l.groups&&l.groups.length){var grpTag=document.createElement('span');grpTag.className='cd-grps';grpTag.textContent=l.groups.join(' · ');cdM.appendChild(grpTag);}
    cd.appendChild(cdC);cd.appendChild(cdS);cd.appendChild(cdR);cd.appendChild(cdM);
    container.appendChild(cd);
  });
}

// ============ CONTROLS ============
function setF(f){filter_=f;document.querySelectorAll('.ch').forEach(function(c){c.className='ch'});document.querySelector('.ch[data-f="'+f+'"]').classList.add(f==='all'?'c-all':f==='new'?'c-g':'c-r');drawMap()}
function setSort(s){sort_=s;document.querySelectorAll('.so').forEach(function(b){b.classList.toggle('active',b.getAttribute('data-s')===s)});buildCards((document.getElementById('sbox').value||'').toLowerCase())}
function togH(){heat_=!heat_;document.getElementById('mH').classList.toggle('on',heat_);drawMap()}
function togA(){arcs_=!arcs_;document.getElementById('mA').classList.toggle('on',arcs_);drawMap()}
function fly(lat,lon){
  closeSidebar();
  leafMap.flyTo([lat,lon],11,{duration:1.2});
  setTimeout(function(){mLayer.eachLayer(function(l){if(l.getLatLng&&Math.abs(l.getLatLng().lat-lat)<.001&&Math.abs(l.getLatLng().lng-lon)<.001)l.openPopup()})},1300);
}

// ============ ANALYTICS ============
function renderAna(){
  var isHR = currentView_ === 'haryana';
  var nNew = LOCS.filter(function(l){return l.closer==='new'}).length;
  var newPct = nNew / LOCS.length;

  // ── Donut chart
  var dc=document.getElementById('dC').getContext('2d'),cx=72,cy=72,r=58,lw=10;
  dc.clearRect(0,0,144,144);
  dc.beginPath();dc.arc(cx,cy,r,-Math.PI/2,-Math.PI/2+Math.PI*2*newPct);dc.strokeStyle='#16A169';dc.lineWidth=lw;dc.lineCap='round';dc.stroke();
  dc.beginPath();dc.arc(cx,cy,r,-Math.PI/2+Math.PI*2*(newPct+0.01),-Math.PI/2+Math.PI*2);dc.strokeStyle='#DE1C1C';dc.lineWidth=lw;dc.lineCap='round';dc.stroke();

  // ── Bar chart helper
  function renderBars(elId, items, nameKey, valKey, color){
    var mx=Math.max.apply(null,items.map(function(x){return Math.abs(x[valKey])}));
    var el=document.getElementById(elId);el.textContent='';
    items.forEach(function(x){
      var row=document.createElement('div');row.className='ts-r';
      var n=document.createElement('div');n.className='ts-n';n.textContent=x[nameKey];
      var bg=document.createElement('div');bg.className='ts-bg';
      var fl=document.createElement('div');fl.className='ts-fl';fl.style.width=Math.abs(x[valKey])/mx*100+'%';fl.style.background=color;
      bg.appendChild(fl);
      var sign=x[valKey]>0?'-':'+';
      var v=document.createElement('div');v.className='ts-v';v.style.color=color;v.textContent=sign+Math.abs(x[valKey])+'km';
      row.appendChild(n);row.appendChild(bg);row.appendChild(v);
      el.appendChild(row);
    });
  }

  if(isHR){
    // City-level (Haryana only)
    var ben=LOCS.filter(function(l){return l.saving_km>0}).sort(function(a,b){return b.saving_km-a.saving_km}).slice(0,5);
    var imp=LOCS.filter(function(l){return l.saving_km<0}).sort(function(a,b){return a.saving_km-b.saving_km}).slice(0,5);
    renderBars('topS', ben, 'city', 'saving_km', 'var(--grn)');
    renderBars('losS', imp, 'city', 'saving_km', 'var(--red)');
    // Haryana distance buckets (short range)
    var bd=[0,0,0,0,0,0],lbls=['<50','50-100','100-150','150-200','200-250','250+'];
    LOCS.forEach(function(l){var d=l.new_km;if(d<50)bd[0]++;else if(d<100)bd[1]++;else if(d<150)bd[2]++;else if(d<200)bd[3]++;else if(d<250)bd[4]++;else bd[5]++});
    var cols=['#C7D2FE','#A5B4FC','#818CF8','#6366F1','#4F46E5','#3730A3'];
    renderDistBars(bd, lbls, cols);
  } else {
    // State-level (All India using STS)
    var ben=STS.filter(function(s){return s.avg_saving>0}).sort(function(a,b){return b.avg_saving-a.avg_saving}).slice(0,5);
    var imp=STS.filter(function(s){return s.avg_saving<0}).sort(function(a,b){return a.avg_saving-b.avg_saving}).slice(0,5);
    renderBars('topS', ben, 'name', 'avg_saving', 'var(--grn)');
    renderBars('losS', imp, 'name', 'avg_saving', 'var(--red)');
    // India distance buckets (wide range)
    var bd=[0,0,0,0,0,0,0,0],lbls=['<100','100-300','300-500','500-800','800-1.2k','1.2-1.6k','1.6-2k','2k+'];
    ALL_LOCS.forEach(function(l){var d=l.new_km;if(d<100)bd[0]++;else if(d<300)bd[1]++;else if(d<500)bd[2]++;else if(d<800)bd[3]++;else if(d<1200)bd[4]++;else if(d<1600)bd[5]++;else if(d<2000)bd[6]++;else bd[7]++});
    var cols=['#E0E7FF','#C7D2FE','#A5B4FC','#818CF8','#6366F1','#4F46E5','#4338CA','#3730A3'];
    renderDistBars(bd, lbls, cols);
  }
}

function renderDistBars(bd, lbls, cols){
  var mxD=Math.max.apply(null,bd);
  var dBarsEl=document.getElementById('dBars');
  dBarsEl.textContent='';
  bd.forEach(function(b,i){
    var bar=document.createElement('div');bar.className='d-bar';
    bar.style.height=Math.max(4,b/mxD*58)+'px';bar.style.background=cols[i];
    bar.setAttribute('data-n',b);
    dBarsEl.appendChild(bar);
  });
  var dLblsEl=document.getElementById('dLbls');
  dLblsEl.textContent='';
  lbls.forEach(function(l){
    var sp=document.createElement('span');sp.textContent=l;
    dLblsEl.appendChild(sp);
  });
}

function aN(id,tgt,d){d=d||1100;var el=document.getElementById(id);var s=performance.now();(function t(n){var p=Math.min((n-s)/d,1);el.textContent=Math.round(tgt*(1-Math.pow(1-p,3)));if(p<1)requestAnimationFrame(t)})(s)}

addEventListener('load',function(){
  initMap();
  setTimeout(function(){
    document.getElementById('loader').classList.add('out');
    aN('k1',5);aN('k2',25);
    drawMap();
  },1800);
});

</script>
</body>
</html>
